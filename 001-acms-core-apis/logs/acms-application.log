2025-12-04T12:16:26.273Z  INFO 18496 --- [restartedMain] com.acms.AcmsApplication                 : Starting AcmsApplication using Java 17.0.12 with PID 18496 (C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes started by SaiVamshiGudem in C:\Users\SaiVamshiGudem\specs\001-acms-core-apis)
2025-12-04T12:16:26.276Z DEBUG 18496 --- [restartedMain] com.acms.AcmsApplication                 : Running with Spring Boot v3.1.3, Spring v6.0.11
2025-12-04T12:16:26.277Z  INFO 18496 --- [restartedMain] com.acms.AcmsApplication                 : The following 1 profile is active: "dev"
2025-12-04T12:16:26.351Z  INFO 18496 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-12-04T12:16:26.357Z  INFO 18496 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-12-04T12:16:27.519Z  INFO 18496 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04T12:16:27.615Z  INFO 18496 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 88 ms. Found 4 JPA repository interfaces.
2025-12-04T12:16:28.365Z  INFO 18496 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-12-04T12:16:28.374Z  INFO 18496 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-04T12:16:28.374Z  INFO 18496 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.12]
2025-12-04T12:16:28.481Z  INFO 18496 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
2025-12-04T12:16:28.482Z  INFO 18496 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2118 ms
2025-12-04T12:16:28.619Z  INFO 18496 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-04T12:16:28.817Z  INFO 18496 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:acmsdb user=SA
2025-12-04T12:16:28.819Z  INFO 18496 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-04T12:16:28.833Z  INFO 18496 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:acmsdb'
2025-12-04T12:16:29.016Z  INFO 18496 --- [restartedMain] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.16.3 by Redgate
2025-12-04T12:16:29.016Z  INFO 18496 --- [restartedMain] o.f.c.internal.license.VersionPrinter    : See release notes here: https://rd.gt/416ObMi
2025-12-04T12:16:29.017Z  INFO 18496 --- [restartedMain] o.f.c.internal.license.VersionPrinter    : 
2025-12-04T12:16:29.032Z  INFO 18496 --- [restartedMain] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:acmsdb (H2 2.1)
2025-12-04T12:16:29.111Z  INFO 18496 --- [restartedMain] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-12-04T12:16:29.114Z  INFO 18496 --- [restartedMain] o.f.core.internal.command.DbValidate     : Successfully validated 1 migration (execution time 00:00.012s)
2025-12-04T12:16:29.119Z  INFO 18496 --- [restartedMain] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-12-04T12:16:29.153Z  INFO 18496 --- [restartedMain] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2025-12-04T12:16:29.174Z  INFO 18496 --- [restartedMain] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.0.0 - initial schema"
2025-12-04T12:16:29.233Z  INFO 18496 --- [restartedMain] o.f.core.internal.command.DbMigrate      : Successfully applied 1 migration to schema "PUBLIC", now at version v1.0.0 (execution time 00:00.087s)
2025-12-04T12:16:29.318Z  INFO 18496 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04T12:16:29.390Z  INFO 18496 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.7.Final
2025-12-04T12:16:29.393Z  INFO 18496 --- [restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2025-12-04T12:16:29.542Z  INFO 18496 --- [restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy
2025-12-04T12:16:29.683Z  INFO 18496 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04T12:16:29.911Z ERROR 18496 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: Multiple '@FilterDef' annotations define a filter named 'activeFilter'
2025-12-04T12:16:29.912Z  WARN 18496 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Multiple '@FilterDef' annotations define a filter named 'activeFilter'
2025-12-04T12:16:30.126Z  WARN 18496 --- [restartedMain] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-214]
2025-12-04T12:16:30.127Z  INFO 18496 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-04T12:16:30.130Z  INFO 18496 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-04T12:16:30.133Z  INFO 18496 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-12-04T12:16:30.166Z  INFO 18496 --- [restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-04T12:16:30.185Z ERROR 18496 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Multiple '@FilterDef' annotations define a filter named 'activeFilter'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.3.jar:3.1.3]
	at com.acms.AcmsApplication.main(AcmsApplication.java:15) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.1.3.jar:3.1.3]
Caused by: org.hibernate.AnnotationException: Multiple '@FilterDef' annotations define a filter named 'activeFilter'
	at org.hibernate.boot.model.internal.AnnotationBinder.bindFilterDef(AnnotationBinder.java:659) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.boot.model.internal.AnnotationBinder.bindFilterDefs(AnnotationBinder.java:647) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:407) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:275) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:318) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1380) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1451) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]
	... 21 common frames omitted

2025-12-04T12:17:36.622Z  INFO 3212 --- [restartedMain] com.acms.AcmsApplication                 : Starting AcmsApplication using Java 17.0.12 with PID 3212 (C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes started by SaiVamshiGudem in C:\Users\SaiVamshiGudem\specs\001-acms-core-apis)
2025-12-04T12:17:36.623Z DEBUG 3212 --- [restartedMain] com.acms.AcmsApplication                 : Running with Spring Boot v3.1.3, Spring v6.0.11
2025-12-04T12:17:36.625Z  INFO 3212 --- [restartedMain] com.acms.AcmsApplication                 : The following 1 profile is active: "dev"
2025-12-04T12:17:36.702Z  INFO 3212 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-12-04T12:17:36.703Z  INFO 3212 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-12-04T12:17:37.787Z  INFO 3212 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04T12:17:37.882Z  INFO 3212 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 85 ms. Found 4 JPA repository interfaces.
2025-12-04T12:17:38.630Z  INFO 3212 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-12-04T12:17:38.639Z  INFO 3212 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-04T12:17:38.640Z  INFO 3212 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.12]
2025-12-04T12:17:38.738Z  INFO 3212 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
2025-12-04T12:17:38.739Z  INFO 3212 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2033 ms
2025-12-04T12:17:38.865Z  INFO 3212 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-04T12:17:39.058Z  INFO 3212 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:acmsdb user=SA
2025-12-04T12:17:39.060Z  INFO 3212 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-04T12:17:39.077Z  INFO 3212 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:acmsdb'
2025-12-04T12:17:39.252Z  INFO 3212 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04T12:17:39.311Z  INFO 3212 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.7.Final
2025-12-04T12:17:39.313Z  INFO 3212 --- [restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2025-12-04T12:17:39.472Z  INFO 3212 --- [restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy
2025-12-04T12:17:39.618Z  INFO 3212 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04T12:17:39.849Z ERROR 3212 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: Multiple '@FilterDef' annotations define a filter named 'activeFilter'
2025-12-04T12:17:39.850Z  WARN 3212 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Multiple '@FilterDef' annotations define a filter named 'activeFilter'
2025-12-04T12:17:40.066Z  WARN 3212 --- [restartedMain] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-214]
2025-12-04T12:17:40.067Z  INFO 3212 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-04T12:17:40.070Z  INFO 3212 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-04T12:17:40.072Z  INFO 3212 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-12-04T12:17:40.090Z  INFO 3212 --- [restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-04T12:17:40.115Z ERROR 3212 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Multiple '@FilterDef' annotations define a filter named 'activeFilter'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.3.jar:3.1.3]
	at com.acms.AcmsApplication.main(AcmsApplication.java:15) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.1.3.jar:3.1.3]
Caused by: org.hibernate.AnnotationException: Multiple '@FilterDef' annotations define a filter named 'activeFilter'
	at org.hibernate.boot.model.internal.AnnotationBinder.bindFilterDef(AnnotationBinder.java:659) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.boot.model.internal.AnnotationBinder.bindFilterDefs(AnnotationBinder.java:647) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:407) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:275) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:318) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1380) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1451) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]
	... 21 common frames omitted

2025-12-04T12:19:17.479Z  INFO 15600 --- [restartedMain] com.acms.AcmsApplication                 : Starting AcmsApplication using Java 17.0.12 with PID 15600 (C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes started by SaiVamshiGudem in C:\Users\SaiVamshiGudem\specs\001-acms-core-apis)
2025-12-04T12:19:17.480Z DEBUG 15600 --- [restartedMain] com.acms.AcmsApplication                 : Running with Spring Boot v3.1.3, Spring v6.0.11
2025-12-04T12:19:17.482Z  INFO 15600 --- [restartedMain] com.acms.AcmsApplication                 : The following 1 profile is active: "dev"
2025-12-04T12:19:17.560Z  INFO 15600 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-12-04T12:19:17.561Z  INFO 15600 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-12-04T12:19:18.579Z  INFO 15600 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04T12:19:18.675Z  INFO 15600 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 88 ms. Found 4 JPA repository interfaces.
2025-12-04T12:19:19.389Z  INFO 15600 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-12-04T12:19:19.398Z  INFO 15600 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-04T12:19:19.399Z  INFO 15600 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.12]
2025-12-04T12:19:19.500Z  INFO 15600 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
2025-12-04T12:19:19.501Z  INFO 15600 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1940 ms
2025-12-04T12:19:19.619Z  INFO 15600 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-04T12:19:19.797Z  INFO 15600 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:acmsdb user=SA
2025-12-04T12:19:19.803Z  INFO 15600 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-04T12:19:19.822Z  INFO 15600 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:acmsdb'
2025-12-04T12:19:19.993Z  INFO 15600 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04T12:19:20.054Z  INFO 15600 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.7.Final
2025-12-04T12:19:20.056Z  INFO 15600 --- [restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2025-12-04T12:19:20.214Z  INFO 15600 --- [restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy
2025-12-04T12:19:20.364Z  INFO 15600 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04T12:19:20.671Z  INFO 15600 --- [restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy
2025-12-04T12:19:20.840Z ERROR 15600 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column 'is_active' is duplicated in mapping for entity 'com.acms.model.Policy' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
2025-12-04T12:19:20.841Z  WARN 15600 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column 'is_active' is duplicated in mapping for entity 'com.acms.model.Policy' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
2025-12-04T12:19:21.066Z  WARN 15600 --- [restartedMain] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-214]
2025-12-04T12:19:21.066Z  INFO 15600 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-04T12:19:21.069Z  INFO 15600 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-04T12:19:21.071Z  INFO 15600 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-12-04T12:19:21.103Z  INFO 15600 --- [restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-04T12:19:21.123Z ERROR 15600 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column 'is_active' is duplicated in mapping for entity 'com.acms.model.Policy' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.3.jar:3.1.3]
	at com.acms.AcmsApplication.main(AcmsApplication.java:15) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.1.3.jar:3.1.3]
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column 'is_active' is duplicated in mapping for entity 'com.acms.model.Policy' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]
	... 21 common frames omitted
Caused by: org.hibernate.MappingException: Column 'is_active' is duplicated in mapping for entity 'com.acms.model.Policy' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
	at org.hibernate.mapping.PersistentClass.checkColumnDuplication(PersistentClass.java:1054) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.mapping.PersistentClass.checkPropertyColumnDuplication(PersistentClass.java:1080) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.mapping.PersistentClass.checkColumnDuplication(PersistentClass.java:1110) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:754) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.mapping.RootClass.validate(RootClass.java:288) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.boot.internal.MetadataImpl.validate(MetadataImpl.java:497) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:251) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1455) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.11.jar:6.0.11]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.11.jar:6.0.11]
	... 25 common frames omitted

2025-12-04T12:20:27.593Z  INFO 22668 --- [restartedMain] com.acms.AcmsApplication                 : Starting AcmsApplication using Java 17.0.12 with PID 22668 (C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes started by SaiVamshiGudem in C:\Users\SaiVamshiGudem\specs\001-acms-core-apis)
2025-12-04T12:20:27.597Z DEBUG 22668 --- [restartedMain] com.acms.AcmsApplication                 : Running with Spring Boot v3.1.3, Spring v6.0.11
2025-12-04T12:20:27.598Z  INFO 22668 --- [restartedMain] com.acms.AcmsApplication                 : The following 1 profile is active: "dev"
2025-12-04T12:20:27.669Z  INFO 22668 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-12-04T12:20:27.669Z  INFO 22668 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-12-04T12:20:28.742Z  INFO 22668 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04T12:20:28.838Z  INFO 22668 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 88 ms. Found 4 JPA repository interfaces.
2025-12-04T12:20:29.560Z  INFO 22668 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-12-04T12:20:29.570Z  INFO 22668 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-04T12:20:29.571Z  INFO 22668 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.12]
2025-12-04T12:20:29.671Z  INFO 22668 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
2025-12-04T12:20:29.671Z  INFO 22668 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2001 ms
2025-12-04T12:20:29.797Z  INFO 22668 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-04T12:20:29.991Z  INFO 22668 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:acmsdb user=SA
2025-12-04T12:20:29.993Z  INFO 22668 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-04T12:20:30.026Z  INFO 22668 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:acmsdb'
2025-12-04T12:20:30.203Z  INFO 22668 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04T12:20:30.261Z  INFO 22668 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.7.Final
2025-12-04T12:20:30.264Z  INFO 22668 --- [restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2025-12-04T12:20:30.422Z  INFO 22668 --- [restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy
2025-12-04T12:20:30.564Z  INFO 22668 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04T12:20:30.867Z  INFO 22668 --- [restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy
2025-12-04T12:20:31.632Z  INFO 22668 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-12-04T12:20:31.647Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists agents cascade 
2025-12-04T12:20:31.653Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists commissions cascade 
2025-12-04T12:20:31.657Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists payments cascade 
2025-12-04T12:20:31.661Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists policies cascade 
2025-12-04T12:20:31.674Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    create table agents (
        date_of_birth date,
        hire_date date,
        is_active BOOLEAN DEFAULT true not null,
        termination_date date,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        version bigint,
        phone varchar(15) not null,
        agent_code varchar(20) not null unique,
        postal_code varchar(20),
        status varchar(20) not null check (status in ('ACTIVE','INACTIVE','SUSPENDED','TERMINATED')),
        country varchar(50),
        first_name varchar(50) not null,
        last_name varchar(50) not null,
        middle_name varchar(50),
        state varchar(50),
        city varchar(100),
        created_by varchar(100) not null,
        email varchar(100) not null unique,
        updated_by varchar(100),
        address varchar(200),
        notes TEXT,
        primary key (id)
    )
2025-12-04T12:20:31.703Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    create table commissions (
        calculation_date date,
        commission_amount numeric(14,2),
        commission_rate numeric(8,4),
        effective_date date,
        expiry_date date,
        is_active BOOLEAN DEFAULT true not null,
        payment_date date,
        premium_amount numeric(14,2),
        agent_id bigint not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        policy_id bigint not null,
        updated_at timestamp(6),
        version bigint,
        commission_type varchar(20) check (commission_type in ('PERCENTAGE','FIXED','TIERED','BONUS')),
        status varchar(20) check (status in ('PENDING','APPROVED','PAID','CANCELLED','HELD','FORFEITED')),
        created_by varchar(100) not null,
        payment_reference varchar(100),
        updated_by varchar(100),
        notes varchar(500),
        primary key (id)
    )
2025-12-04T12:20:31.706Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    create table payments (
        is_active BOOLEAN DEFAULT true not null,
        payment_amount numeric(14,2) not null,
        payment_date date,
        processed_date date,
        agent_id bigint not null,
        commission_id bigint not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        version bigint,
        payment_method varchar(20) check (payment_method in ('BANK_TRANSFER','CHECK','CASH','WIRE_TRANSFER','DIRECT_DEPOSIT','ELECTRONIC_FUND_TRANSFER')),
        payment_status varchar(20) check (payment_status in ('PENDING','PROCESSING','COMPLETED','FAILED','CANCELLED','REVERSED')),
        bank_account varchar(50),
        bank_name varchar(100),
        created_by varchar(100) not null,
        payment_reference varchar(100) unique,
        transaction_id varchar(100),
        updated_by varchar(100),
        notes varchar(500),
        primary key (id)
    )
2025-12-04T12:20:31.709Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    create table policies (
        cancellation_date date,
        coverage_amount numeric(14,2),
        deductible_amount numeric(14,2),
        effective_date date,
        expiration_date date,
        is_active BOOLEAN DEFAULT true not null,
        premium numeric(14,2),
        renewal_date date,
        agent_id bigint not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        version bigint,
        status varchar(20) not null check (status in ('ACTIVE','INACTIVE','PENDING','CANCELLED','EXPIRED','RENEWED','SUSPENDED')),
        group_number varchar(50),
        policy_number varchar(50) not null unique,
        created_by varchar(100) not null,
        group_name varchar(100),
        policy_type varchar(100) not null,
        updated_by varchar(100),
        cancellation_reason varchar(500),
        description varchar(500),
        primary key (id)
    )
2025-12-04T12:20:31.712Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists commissions 
       add constraint FKd8v22tv0b7qw3b2r2eme5uidd 
       foreign key (agent_id) 
       references agents
2025-12-04T12:20:31.725Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists commissions 
       add constraint FKdtggxohtssse1s800upf6ymy9 
       foreign key (policy_id) 
       references policies
2025-12-04T12:20:31.734Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists payments 
       add constraint FKrv70ecieoxbm3l4sts6a1oq58 
       foreign key (agent_id) 
       references agents
2025-12-04T12:20:31.738Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists payments 
       add constraint FKtb6vleukgiq0pyhpw36rakdwb 
       foreign key (commission_id) 
       references commissions
2025-12-04T12:20:31.740Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists policies 
       add constraint FKevhjihuyyk0sdhjq6c1vwk3al 
       foreign key (agent_id) 
       references agents
2025-12-04T12:20:31.745Z  INFO 22668 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04T12:20:31.962Z  WARN 22668 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'agentController' defined in file [C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes\com\acms\controller\AgentController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'agentService' defined in file [C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes\com\acms\service\AgentService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'agentRepository' defined in com.acms.repository.AgentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Attempt to add version property private java.lang.Long com.acms.model.AuditEntity.version but already have property private java.lang.Long com.acms.model.Agent.version registered as version; Check your mapping configuration
2025-12-04T12:20:31.962Z  INFO 22668 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04T12:20:31.963Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists agents cascade 
2025-12-04T12:20:31.966Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists commissions cascade 
2025-12-04T12:20:31.968Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists payments cascade 
2025-12-04T12:20:31.970Z DEBUG 22668 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists policies cascade 
2025-12-04T12:20:32.184Z  WARN 22668 --- [restartedMain] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-214]
2025-12-04T12:20:32.185Z  INFO 22668 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-04T12:20:32.187Z  INFO 22668 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-04T12:20:32.189Z  INFO 22668 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-12-04T12:20:32.218Z  INFO 22668 --- [restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-04T12:20:32.240Z ERROR 22668 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'agentController' defined in file [C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes\com\acms\controller\AgentController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'agentService' defined in file [C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes\com\acms\service\AgentService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'agentRepository' defined in com.acms.repository.AgentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Attempt to add version property private java.lang.Long com.acms.model.AuditEntity.version but already have property private java.lang.Long com.acms.model.Agent.version registered as version; Check your mapping configuration
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.3.jar:3.1.3]
	at com.acms.AcmsApplication.main(AcmsApplication.java:15) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.1.3.jar:3.1.3]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'agentService' defined in file [C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes\com\acms\service\AgentService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'agentRepository' defined in com.acms.repository.AgentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Attempt to add version property private java.lang.Long com.acms.model.AuditEntity.version but already have property private java.lang.Long com.acms.model.Agent.version registered as version; Check your mapping configuration
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-6.0.11.jar:6.0.11]
	... 24 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'agentRepository' defined in com.acms.repository.AgentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Attempt to add version property private java.lang.Long com.acms.model.AuditEntity.version but already have property private java.lang.Long com.acms.model.Agent.version registered as version; Check your mapping configuration
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-6.0.11.jar:6.0.11]
	... 38 common frames omitted
Caused by: org.springframework.data.mapping.MappingException: Attempt to add version property private java.lang.Long com.acms.model.AuditEntity.version but already have property private java.lang.Long com.acms.model.Agent.version registered as version; Check your mapping configuration
	at org.springframework.data.mapping.model.BasicPersistentEntity.addPersistentProperty(BasicPersistentEntity.java:208) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.mapping.context.AbstractMappingContext$PersistentPropertyCreator.createAndRegisterProperty(AbstractMappingContext.java:578) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.mapping.context.AbstractMappingContext$PersistentPropertyCreator.doWith(AbstractMappingContext.java:542) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:703) ~[spring-core-6.0.11.jar:6.0.11]
	at org.springframework.data.mapping.context.AbstractMappingContext.doAddPersistentEntity(AbstractMappingContext.java:422) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.mapping.context.AbstractMappingContext.addPersistentEntity(AbstractMappingContext.java:379) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:280) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:206) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:92) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$6(RepositoryFactoryBeanSupport.java:282) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at java.base/java.util.Optional.ifPresent(Optional.java:178) ~[na:na]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:282) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.3.jar:3.1.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]
	... 49 common frames omitted

2025-12-04T12:21:50.824Z  INFO 20760 --- [restartedMain] com.acms.AcmsApplication                 : Starting AcmsApplication using Java 17.0.12 with PID 20760 (C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes started by SaiVamshiGudem in C:\Users\SaiVamshiGudem\specs\001-acms-core-apis)
2025-12-04T12:21:50.827Z DEBUG 20760 --- [restartedMain] com.acms.AcmsApplication                 : Running with Spring Boot v3.1.3, Spring v6.0.11
2025-12-04T12:21:50.827Z  INFO 20760 --- [restartedMain] com.acms.AcmsApplication                 : The following 1 profile is active: "dev"
2025-12-04T12:21:50.909Z  INFO 20760 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-12-04T12:21:50.909Z  INFO 20760 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-12-04T12:21:51.949Z  INFO 20760 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04T12:21:52.049Z  INFO 20760 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 93 ms. Found 4 JPA repository interfaces.
2025-12-04T12:21:52.789Z  INFO 20760 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-12-04T12:21:52.797Z  INFO 20760 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-04T12:21:52.800Z  INFO 20760 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.12]
2025-12-04T12:21:52.896Z  INFO 20760 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
2025-12-04T12:21:52.896Z  INFO 20760 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1986 ms
2025-12-04T12:21:53.020Z  INFO 20760 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-04T12:21:53.214Z  INFO 20760 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:acmsdb user=SA
2025-12-04T12:21:53.217Z  INFO 20760 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-04T12:21:53.254Z  INFO 20760 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:acmsdb'
2025-12-04T12:21:53.409Z  INFO 20760 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04T12:21:53.473Z  INFO 20760 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.7.Final
2025-12-04T12:21:53.476Z  INFO 20760 --- [restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2025-12-04T12:21:53.622Z  INFO 20760 --- [restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy
2025-12-04T12:21:53.759Z  INFO 20760 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04T12:21:54.049Z  INFO 20760 --- [restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy
2025-12-04T12:21:54.807Z  INFO 20760 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-12-04T12:21:54.823Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists agents cascade 
2025-12-04T12:21:54.829Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists commissions cascade 
2025-12-04T12:21:54.831Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists payments cascade 
2025-12-04T12:21:54.833Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists policies cascade 
2025-12-04T12:21:54.847Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    create table agents (
        date_of_birth date,
        hire_date date,
        is_active BOOLEAN DEFAULT true not null,
        termination_date date,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        version bigint,
        phone varchar(15) not null,
        agent_code varchar(20) not null unique,
        postal_code varchar(20),
        status varchar(20) not null check (status in ('ACTIVE','INACTIVE','SUSPENDED','TERMINATED')),
        country varchar(50),
        first_name varchar(50) not null,
        last_name varchar(50) not null,
        middle_name varchar(50),
        state varchar(50),
        city varchar(100),
        created_by varchar(100) not null,
        email varchar(100) not null unique,
        updated_by varchar(100),
        address varchar(200),
        notes TEXT,
        primary key (id)
    )
2025-12-04T12:21:54.867Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    create table commissions (
        calculation_date date,
        commission_amount numeric(14,2),
        commission_rate numeric(8,4),
        effective_date date,
        expiry_date date,
        is_active BOOLEAN DEFAULT true not null,
        payment_date date,
        premium_amount numeric(14,2),
        agent_id bigint not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        policy_id bigint not null,
        updated_at timestamp(6),
        version bigint,
        commission_type varchar(20) check (commission_type in ('PERCENTAGE','FIXED','TIERED','BONUS')),
        status varchar(20) check (status in ('PENDING','APPROVED','PAID','CANCELLED','HELD','FORFEITED')),
        created_by varchar(100) not null,
        payment_reference varchar(100),
        updated_by varchar(100),
        notes varchar(500),
        primary key (id)
    )
2025-12-04T12:21:54.869Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    create table payments (
        is_active BOOLEAN DEFAULT true not null,
        payment_amount numeric(14,2) not null,
        payment_date date,
        processed_date date,
        agent_id bigint not null,
        commission_id bigint not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        version bigint,
        payment_method varchar(20) check (payment_method in ('BANK_TRANSFER','CHECK','CASH','WIRE_TRANSFER','DIRECT_DEPOSIT','ELECTRONIC_FUND_TRANSFER')),
        payment_status varchar(20) check (payment_status in ('PENDING','PROCESSING','COMPLETED','FAILED','CANCELLED','REVERSED')),
        bank_account varchar(50),
        bank_name varchar(100),
        created_by varchar(100) not null,
        payment_reference varchar(100) unique,
        transaction_id varchar(100),
        updated_by varchar(100),
        notes varchar(500),
        primary key (id)
    )
2025-12-04T12:21:54.873Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    create table policies (
        cancellation_date date,
        coverage_amount numeric(14,2),
        deductible_amount numeric(14,2),
        effective_date date,
        expiration_date date,
        is_active BOOLEAN DEFAULT true not null,
        premium numeric(14,2),
        renewal_date date,
        agent_id bigint not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        version bigint,
        status varchar(20) not null check (status in ('ACTIVE','INACTIVE','PENDING','CANCELLED','EXPIRED','RENEWED','SUSPENDED')),
        group_number varchar(50),
        policy_number varchar(50) not null unique,
        created_by varchar(100) not null,
        group_name varchar(100),
        policy_type varchar(100) not null,
        updated_by varchar(100),
        cancellation_reason varchar(500),
        description varchar(500),
        primary key (id)
    )
2025-12-04T12:21:54.881Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists commissions 
       add constraint FKd8v22tv0b7qw3b2r2eme5uidd 
       foreign key (agent_id) 
       references agents
2025-12-04T12:21:54.902Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists commissions 
       add constraint FKdtggxohtssse1s800upf6ymy9 
       foreign key (policy_id) 
       references policies
2025-12-04T12:21:54.903Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists payments 
       add constraint FKrv70ecieoxbm3l4sts6a1oq58 
       foreign key (agent_id) 
       references agents
2025-12-04T12:21:54.905Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists payments 
       add constraint FKtb6vleukgiq0pyhpw36rakdwb 
       foreign key (commission_id) 
       references commissions
2025-12-04T12:21:54.907Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists policies 
       add constraint FKevhjihuyyk0sdhjq6c1vwk3al 
       foreign key (agent_id) 
       references agents
2025-12-04T12:21:54.917Z  INFO 20760 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04T12:21:55.210Z  INFO 20760 --- [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04T12:21:55.631Z  WARN 20760 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'agentController' defined in file [C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes\com\acms\controller\AgentController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'agentService' defined in file [C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes\com\acms\service\AgentService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'agentRepository' defined in com.acms.repository.AgentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.List com.acms.repository.AgentRepository.findAllByActive(boolean); Reason: Validation failed for query for method public abstract java.util.List com.acms.repository.AgentRepository.findAllByActive(boolean)
2025-12-04T12:21:55.632Z  INFO 20760 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04T12:21:55.632Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists agents cascade 
2025-12-04T12:21:55.637Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists commissions cascade 
2025-12-04T12:21:55.639Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists payments cascade 
2025-12-04T12:21:55.640Z DEBUG 20760 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists policies cascade 
2025-12-04T12:21:55.861Z  WARN 20760 --- [restartedMain] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-214]
2025-12-04T12:21:55.862Z  INFO 20760 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-04T12:21:55.864Z  INFO 20760 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-04T12:21:55.867Z  INFO 20760 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-12-04T12:21:55.896Z  INFO 20760 --- [restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-04T12:21:55.928Z ERROR 20760 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'agentController' defined in file [C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes\com\acms\controller\AgentController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'agentService' defined in file [C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes\com\acms\service\AgentService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'agentRepository' defined in com.acms.repository.AgentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.List com.acms.repository.AgentRepository.findAllByActive(boolean); Reason: Validation failed for query for method public abstract java.util.List com.acms.repository.AgentRepository.findAllByActive(boolean)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.3.jar:3.1.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.3.jar:3.1.3]
	at com.acms.AcmsApplication.main(AcmsApplication.java:15) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.1.3.jar:3.1.3]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'agentService' defined in file [C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes\com\acms\service\AgentService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'agentRepository' defined in com.acms.repository.AgentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.List com.acms.repository.AgentRepository.findAllByActive(boolean); Reason: Validation failed for query for method public abstract java.util.List com.acms.repository.AgentRepository.findAllByActive(boolean)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-6.0.11.jar:6.0.11]
	... 24 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'agentRepository' defined in com.acms.repository.AgentRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.List com.acms.repository.AgentRepository.findAllByActive(boolean); Reason: Validation failed for query for method public abstract java.util.List com.acms.repository.AgentRepository.findAllByActive(boolean)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-6.0.11.jar:6.0.11]
	... 38 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.List com.acms.repository.AgentRepository.findAllByActive(boolean); Reason: Validation failed for query for method public abstract java.util.List com.acms.repository.AgentRepository.findAllByActive(boolean)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at java.base/java.util.Optional.map(Optional.java:260) ~[na:na]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.3.jar:3.1.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.3.jar:3.1.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]
	... 49 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.acms.repository.AgentRepository.findAllByActive(boolean)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100) ~[spring-data-jpa-3.1.3.jar:3.1.3]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70) ~[spring-data-jpa-3.1.3.jar:3.1.3]
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60) ~[spring-data-jpa-3.1.3.jar:3.1.3]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170) ~[spring-data-jpa-3.1.3.jar:3.1.3]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-3.1.3.jar:3.1.3]
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95) ~[spring-data-jpa-3.1.3.jar:3.1.3]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111) ~[spring-data-commons-3.1.3.jar:3.1.3]
	... 61 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.InterpretationException: Error interpreting query [SELECT a FROM Agent a WHERE a.isActive = :isActive]; this may indicate a semantic (user query) problem or a bug in the parser [SELECT a FROM Agent a WHERE a.isActive = :isActive]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:168) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:795) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.11.jar:6.0.11]
	at jdk.proxy4/jdk.proxy4.$Proxy179.createQuery(Unknown Source) ~[na:na]
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94) ~[spring-data-jpa-3.1.3.jar:3.1.3]
	... 67 common frames omitted
Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [SELECT a FROM Agent a WHERE a.isActive = :isActive]; this may indicate a semantic (user query) problem or a bug in the parser [SELECT a FROM Agent a WHERE a.isActive = :isActive]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:97) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.lambda$interpretHql$2(AbstractSharedSessionContract.java:744) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:141) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:128) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	... 76 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.SemanticException: Could not resolve attribute 'isActive' of 'com.acms.model.Agent'
	at org.hibernate.query.sqm.SqmPathSource.getSubPathSource(SqmPathSource.java:61) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.sqm.tree.domain.AbstractSqmPath.get(AbstractSqmPath.java:189) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.sqm.tree.domain.AbstractSqmFrom.resolvePathPart(AbstractSqmFrom.java:197) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.DomainPathPart.resolvePathPart(DomainPathPart.java:42) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.BasicDotIdentifierConsumer.consumeIdentifier(BasicDotIdentifierConsumer.java:91) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimplePath(SemanticQueryBuilder.java:5208) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitIndexedPathAccessFragment(SemanticQueryBuilder.java:5155) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGeneralPathFragment(SemanticQueryBuilder.java:5124) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGeneralPathExpression(SemanticQueryBuilder.java:1749) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.grammars.hql.HqlParser$GeneralPathExpressionContext.accept(HqlParser.java:7590) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.antlr.v4.runtime.tree.AbstractParseTreeVisitor.visitChildren(AbstractParseTreeVisitor.java:46) ~[antlr4-runtime-4.10.1.jar:4.10.1]
	at org.hibernate.grammars.hql.HqlParserBaseVisitor.visitBarePrimaryExpression(HqlParserBaseVisitor.java:720) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.grammars.hql.HqlParser$BarePrimaryExpressionContext.accept(HqlParser.java:7064) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitComparisonPredicate(SemanticQueryBuilder.java:2453) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitComparisonPredicate(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.grammars.hql.HqlParser$ComparisonPredicateContext.accept(HqlParser.java:6111) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitWhereClause(SemanticQueryBuilder.java:2297) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitWhereClause(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.grammars.hql.HqlParser$WhereClauseContext.accept(HqlParser.java:5910) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1161) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:937) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1818) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:931) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:253) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1711) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:418) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:377) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:295) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81) ~[hibernate-core-6.2.7.Final.jar:6.2.7.Final]
	... 81 common frames omitted
Caused by: org.hibernate.query.SemanticException: Could not resolve attribute 'isActive' of 'com.acms.model.Agent'
	... 111 common frames omitted

2025-12-04T12:23:15.325Z  INFO 14632 --- [restartedMain] com.acms.AcmsApplication                 : Starting AcmsApplication using Java 17.0.12 with PID 14632 (C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes started by SaiVamshiGudem in C:\Users\SaiVamshiGudem\specs\001-acms-core-apis)
2025-12-04T12:23:15.327Z DEBUG 14632 --- [restartedMain] com.acms.AcmsApplication                 : Running with Spring Boot v3.1.3, Spring v6.0.11
2025-12-04T12:23:15.329Z  INFO 14632 --- [restartedMain] com.acms.AcmsApplication                 : The following 1 profile is active: "dev"
2025-12-04T12:23:15.411Z  INFO 14632 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-12-04T12:23:15.411Z  INFO 14632 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-12-04T12:23:16.437Z  INFO 14632 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04T12:23:16.535Z  INFO 14632 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 91 ms. Found 4 JPA repository interfaces.
2025-12-04T12:23:17.315Z  INFO 14632 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-12-04T12:23:17.326Z  INFO 14632 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-04T12:23:17.326Z  INFO 14632 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.12]
2025-12-04T12:23:17.430Z  INFO 14632 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
2025-12-04T12:23:17.432Z  INFO 14632 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2018 ms
2025-12-04T12:23:17.565Z  INFO 14632 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-04T12:23:17.767Z  INFO 14632 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:acmsdb user=SA
2025-12-04T12:23:17.768Z  INFO 14632 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-04T12:23:17.807Z  INFO 14632 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:acmsdb'
2025-12-04T12:23:17.994Z  INFO 14632 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04T12:23:18.065Z  INFO 14632 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.7.Final
2025-12-04T12:23:18.069Z  INFO 14632 --- [restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2025-12-04T12:23:18.273Z  INFO 14632 --- [restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy
2025-12-04T12:23:18.441Z  INFO 14632 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04T12:23:18.783Z  INFO 14632 --- [restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy
2025-12-04T12:23:19.708Z  INFO 14632 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-12-04T12:23:19.728Z DEBUG 14632 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists agents cascade 
2025-12-04T12:23:19.737Z DEBUG 14632 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists commissions cascade 
2025-12-04T12:23:19.739Z DEBUG 14632 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists payments cascade 
2025-12-04T12:23:19.741Z DEBUG 14632 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists policies cascade 
2025-12-04T12:23:19.748Z DEBUG 14632 --- [restartedMain] org.hibernate.SQL                        : 
    create table agents (
        date_of_birth date,
        hire_date date,
        is_active BOOLEAN DEFAULT true not null,
        termination_date date,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        version bigint,
        phone varchar(15) not null,
        agent_code varchar(20) not null unique,
        postal_code varchar(20),
        status varchar(20) not null check (status in ('ACTIVE','INACTIVE','SUSPENDED','TERMINATED')),
        country varchar(50),
        first_name varchar(50) not null,
        last_name varchar(50) not null,
        middle_name varchar(50),
        state varchar(50),
        city varchar(100),
        created_by varchar(100) not null,
        email varchar(100) not null unique,
        updated_by varchar(100),
        address varchar(200),
        notes TEXT,
        primary key (id)
    )
2025-12-04T12:23:19.777Z DEBUG 14632 --- [restartedMain] org.hibernate.SQL                        : 
    create table commissions (
        calculation_date date,
        commission_amount numeric(14,2),
        commission_rate numeric(8,4),
        effective_date date,
        expiry_date date,
        is_active BOOLEAN DEFAULT true not null,
        payment_date date,
        premium_amount numeric(14,2),
        agent_id bigint not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        policy_id bigint not null,
        updated_at timestamp(6),
        version bigint,
        commission_type varchar(20) check (commission_type in ('PERCENTAGE','FIXED','TIERED','BONUS')),
        status varchar(20) check (status in ('PENDING','APPROVED','PAID','CANCELLED','HELD','FORFEITED')),
        created_by varchar(100) not null,
        payment_reference varchar(100),
        updated_by varchar(100),
        notes varchar(500),
        primary key (id)
    )
2025-12-04T12:23:19.782Z DEBUG 14632 --- [restartedMain] org.hibernate.SQL                        : 
    create table payments (
        is_active BOOLEAN DEFAULT true not null,
        payment_amount numeric(14,2) not null,
        payment_date date,
        processed_date date,
        agent_id bigint not null,
        commission_id bigint not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        version bigint,
        payment_method varchar(20) check (payment_method in ('BANK_TRANSFER','CHECK','CASH','WIRE_TRANSFER','DIRECT_DEPOSIT','ELECTRONIC_FUND_TRANSFER')),
        payment_status varchar(20) check (payment_status in ('PENDING','PROCESSING','COMPLETED','FAILED','CANCELLED','REVERSED')),
        bank_account varchar(50),
        bank_name varchar(100),
        created_by varchar(100) not null,
        payment_reference varchar(100) unique,
        transaction_id varchar(100),
        updated_by varchar(100),
        notes varchar(500),
        primary key (id)
    )
2025-12-04T12:23:19.798Z DEBUG 14632 --- [restartedMain] org.hibernate.SQL                        : 
    create table policies (
        cancellation_date date,
        coverage_amount numeric(14,2),
        deductible_amount numeric(14,2),
        effective_date date,
        expiration_date date,
        is_active BOOLEAN DEFAULT true not null,
        premium numeric(14,2),
        renewal_date date,
        agent_id bigint not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        version bigint,
        status varchar(20) not null check (status in ('ACTIVE','INACTIVE','PENDING','CANCELLED','EXPIRED','RENEWED','SUSPENDED')),
        group_number varchar(50),
        policy_number varchar(50) not null unique,
        created_by varchar(100) not null,
        group_name varchar(100),
        policy_type varchar(100) not null,
        updated_by varchar(100),
        cancellation_reason varchar(500),
        description varchar(500),
        primary key (id)
    )
2025-12-04T12:23:19.801Z DEBUG 14632 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists commissions 
       add constraint FKd8v22tv0b7qw3b2r2eme5uidd 
       foreign key (agent_id) 
       references agents
2025-12-04T12:23:19.810Z DEBUG 14632 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists commissions 
       add constraint FKdtggxohtssse1s800upf6ymy9 
       foreign key (policy_id) 
       references policies
2025-12-04T12:23:19.814Z DEBUG 14632 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists payments 
       add constraint FKrv70ecieoxbm3l4sts6a1oq58 
       foreign key (agent_id) 
       references agents
2025-12-04T12:23:19.827Z DEBUG 14632 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists payments 
       add constraint FKtb6vleukgiq0pyhpw36rakdwb 
       foreign key (commission_id) 
       references commissions
2025-12-04T12:23:19.831Z DEBUG 14632 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists policies 
       add constraint FKevhjihuyyk0sdhjq6c1vwk3al 
       foreign key (agent_id) 
       references agents
2025-12-04T12:23:19.836Z  INFO 14632 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04T12:23:20.147Z  INFO 14632 --- [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04T12:23:21.278Z  INFO 14632 --- [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 6 endpoint(s) beneath base path '/actuator'
2025-12-04T12:23:21.335Z  WARN 14632 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-04T12:23:21.796Z  INFO 14632 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-12-04T12:23:21.891Z  INFO 14632 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/api'
2025-12-04T12:23:21.921Z  INFO 14632 --- [restartedMain] com.acms.AcmsApplication                 : Started AcmsApplication in 7.108 seconds (process running for 7.687)
2025-12-04T12:25:05.585Z  INFO 14632 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04T12:25:05.586Z  INFO 14632 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-04T12:25:05.587Z  INFO 14632 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-12-04T12:25:07.065Z  INFO 14632 --- [http-nio-8080-exec-9] o.springdoc.api.AbstractOpenApiResource  : Init duration for springdoc-openapi is: 1121 ms
2025-12-04T12:26:12.370Z DEBUG 14632 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T12:29:47.986Z DEBUG 14632 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T12:30:29.681Z  INFO 14632 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Creating new agent with code: AG001
2025-12-04T12:30:29.703Z DEBUG 14632 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T12:30:29.707Z DEBUG 14632 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T12:30:29.742Z DEBUG 14632 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T12:30:29.750Z  WARN 14632 --- [http-nio-8080-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23502, SQLState: 23502
2025-12-04T12:30:29.753Z ERROR 14632 --- [http-nio-8080-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]
2025-12-04T12:30:29.763Z ERROR 14632 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Data integrity violation: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]
2025-12-04T12:30:29.769Z  WARN 14632 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:<EOL>insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]]
2025-12-04T12:31:11.329Z DEBUG 14632 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T12:37:27.255Z  INFO 14632 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Creating new agent with code: AG002
2025-12-04T12:37:27.257Z DEBUG 14632 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T12:37:27.278Z DEBUG 14632 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T12:37:27.281Z DEBUG 14632 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T12:37:27.282Z  WARN 14632 --- [http-nio-8080-exec-3] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23502, SQLState: 23502
2025-12-04T12:37:27.282Z ERROR 14632 --- [http-nio-8080-exec-3] o.h.engine.jdbc.spi.SqlExceptionHelper   : NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]
2025-12-04T12:37:27.284Z ERROR 14632 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Data integrity violation: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]
2025-12-04T12:37:27.289Z  WARN 14632 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:<EOL>insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]]
2025-12-04T12:37:29.654Z  INFO 14632 --- [http-nio-8080-exec-7] com.acms.service.AgentService            : Creating new agent with code: AG002
2025-12-04T12:37:29.656Z DEBUG 14632 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T12:37:29.657Z DEBUG 14632 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T12:37:29.659Z DEBUG 14632 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T12:37:29.661Z  WARN 14632 --- [http-nio-8080-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23502, SQLState: 23502
2025-12-04T12:37:29.661Z ERROR 14632 --- [http-nio-8080-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]
2025-12-04T12:37:29.662Z ERROR 14632 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Data integrity violation: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]
2025-12-04T12:37:29.663Z  WARN 14632 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:<EOL>insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]]
2025-12-04T12:38:45.062Z  INFO 14632 --- [http-nio-8080-exec-10] com.acms.service.AgentService            : Creating new agent with code: AG002
2025-12-04T12:38:45.063Z DEBUG 14632 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T12:38:45.066Z DEBUG 14632 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T12:38:45.069Z DEBUG 14632 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T12:38:45.072Z  WARN 14632 --- [http-nio-8080-exec-10] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23502, SQLState: 23502
2025-12-04T12:38:45.073Z ERROR 14632 --- [http-nio-8080-exec-10] o.h.engine.jdbc.spi.SqlExceptionHelper   : NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]
2025-12-04T12:38:45.073Z ERROR 14632 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Data integrity violation: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]
2025-12-04T12:38:45.081Z  WARN 14632 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:<EOL>insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]]
2025-12-04T12:40:24.389Z  INFO 14632 --- [http-nio-8080-exec-6] com.acms.service.AgentService            : Creating new agent with code: AG002
2025-12-04T12:40:24.391Z DEBUG 14632 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T12:40:24.393Z DEBUG 14632 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T12:40:24.395Z DEBUG 14632 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T12:40:24.396Z  WARN 14632 --- [http-nio-8080-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23502, SQLState: 23502
2025-12-04T12:40:24.397Z ERROR 14632 --- [http-nio-8080-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]
2025-12-04T12:40:24.397Z ERROR 14632 --- [http-nio-8080-exec-6] c.acms.exception.GlobalExceptionHandler  : Data integrity violation: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]
2025-12-04T12:40:24.399Z  WARN 14632 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:<EOL>insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]]
2025-12-04T12:40:28.654Z  INFO 14632 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Creating new agent with code: AG002
2025-12-04T12:40:28.655Z DEBUG 14632 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T12:40:28.657Z DEBUG 14632 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T12:40:28.659Z DEBUG 14632 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T12:40:28.667Z  WARN 14632 --- [http-nio-8080-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23502, SQLState: 23502
2025-12-04T12:40:28.681Z ERROR 14632 --- [http-nio-8080-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]
2025-12-04T12:40:28.682Z ERROR 14632 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Data integrity violation: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]
2025-12-04T12:40:28.685Z  WARN 14632 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:<EOL>insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]]
2025-12-04T12:41:16.552Z  INFO 14632 --- [http-nio-8080-exec-2] com.acms.service.AgentService            : Creating new agent with code: AG002
2025-12-04T12:41:16.556Z DEBUG 14632 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T12:41:16.558Z DEBUG 14632 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T12:41:16.558Z DEBUG 14632 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T12:41:16.561Z  WARN 14632 --- [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23502, SQLState: 23502
2025-12-04T12:41:16.561Z ERROR 14632 --- [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]
2025-12-04T12:41:16.562Z ERROR 14632 --- [http-nio-8080-exec-2] c.acms.exception.GlobalExceptionHandler  : Data integrity violation: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]
2025-12-04T12:41:16.564Z  WARN 14632 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:<EOL>insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]]
2025-12-04T12:43:25.144Z  INFO 14632 --- [http-nio-8080-exec-7] com.acms.service.AgentService            : Creating new agent with code: AG002
2025-12-04T12:43:25.146Z DEBUG 14632 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T12:43:25.148Z DEBUG 14632 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T12:43:25.151Z DEBUG 14632 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T12:43:25.153Z  WARN 14632 --- [http-nio-8080-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23502, SQLState: 23502
2025-12-04T12:43:25.153Z ERROR 14632 --- [http-nio-8080-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]
2025-12-04T12:43:25.154Z ERROR 14632 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Data integrity violation: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]
2025-12-04T12:43:25.156Z  WARN 14632 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:<EOL>insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]]
2025-12-04T12:44:41.835Z  INFO 14632 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Creating new agent with code: AG002
2025-12-04T12:44:41.837Z DEBUG 14632 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T12:44:41.839Z DEBUG 14632 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T12:44:41.840Z DEBUG 14632 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T12:44:41.843Z  WARN 14632 --- [http-nio-8080-exec-5] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23502, SQLState: 23502
2025-12-04T12:44:41.843Z ERROR 14632 --- [http-nio-8080-exec-5] o.h.engine.jdbc.spi.SqlExceptionHelper   : NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]
2025-12-04T12:44:41.844Z ERROR 14632 --- [http-nio-8080-exec-5] c.acms.exception.GlobalExceptionHandler  : Data integrity violation: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:
insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]
2025-12-04T12:44:41.845Z  WARN 14632 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [NULL not allowed for column "CREATED_BY"; SQL statement:<EOL>insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default) [23502-214]] [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; SQL [insert into agents (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) values (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)]; constraint [null]]
2025-12-04T12:45:33.368Z  INFO 14632 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04T12:45:33.369Z DEBUG 14632 --- [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists agents cascade 
2025-12-04T12:45:33.373Z DEBUG 14632 --- [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists commissions cascade 
2025-12-04T12:45:33.374Z DEBUG 14632 --- [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists payments cascade 
2025-12-04T12:45:33.376Z DEBUG 14632 --- [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists policies cascade 
2025-12-04T12:45:33.592Z  WARN 14632 --- [SpringApplicationShutdownHook] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-214]
2025-12-04T12:45:33.593Z  INFO 14632 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-04T12:45:33.596Z  INFO 14632 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-04T12:45:50.289Z  INFO 19552 --- [restartedMain] com.acms.AcmsApplication                 : Starting AcmsApplication using Java 17.0.12 with PID 19552 (C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes started by SaiVamshiGudem in C:\Users\SaiVamshiGudem\specs\001-acms-core-apis)
2025-12-04T12:45:50.292Z DEBUG 19552 --- [restartedMain] com.acms.AcmsApplication                 : Running with Spring Boot v3.1.3, Spring v6.0.11
2025-12-04T12:45:50.293Z  INFO 19552 --- [restartedMain] com.acms.AcmsApplication                 : The following 1 profile is active: "dev"
2025-12-04T12:45:50.368Z  INFO 19552 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-12-04T12:45:50.369Z  INFO 19552 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-12-04T12:45:51.105Z  WARN 19552 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.support.BeanDefinitionOverrideException: Invalid bean definition with name 'jpaAuditingHandler' defined in null: Cannot register bean definition [Root bean: class [org.springframework.data.auditing.AuditingHandler]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=from; initMethodNames=null; destroyMethodNames=null] for bean 'jpaAuditingHandler' since there is already [Root bean: class [org.springframework.data.auditing.AuditingHandler]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=from; initMethodNames=null; destroyMethodNames=null] bound.
2025-12-04T12:45:51.121Z  INFO 19552 --- [restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-04T12:45:51.148Z ERROR 19552 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

The bean 'jpaAuditingHandler' could not be registered. A bean with that name has already been defined and overriding is disabled.

Action:

Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true

2025-12-04T12:46:40.502Z  INFO 8752 --- [restartedMain] com.acms.AcmsApplication                 : Starting AcmsApplication using Java 17.0.12 with PID 8752 (C:\Users\SaiVamshiGudem\specs\001-acms-core-apis\target\classes started by SaiVamshiGudem in C:\Users\SaiVamshiGudem\specs\001-acms-core-apis)
2025-12-04T12:46:40.503Z DEBUG 8752 --- [restartedMain] com.acms.AcmsApplication                 : Running with Spring Boot v3.1.3, Spring v6.0.11
2025-12-04T12:46:40.505Z  INFO 8752 --- [restartedMain] com.acms.AcmsApplication                 : The following 1 profile is active: "dev"
2025-12-04T12:46:40.583Z  INFO 8752 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-12-04T12:46:40.584Z  INFO 8752 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-12-04T12:46:41.619Z  INFO 8752 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04T12:46:41.709Z  INFO 8752 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 83 ms. Found 4 JPA repository interfaces.
2025-12-04T12:46:42.470Z  INFO 8752 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-12-04T12:46:42.480Z  INFO 8752 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-04T12:46:42.481Z  INFO 8752 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.12]
2025-12-04T12:46:42.579Z  INFO 8752 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring embedded WebApplicationContext
2025-12-04T12:46:42.580Z  INFO 8752 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1994 ms
2025-12-04T12:46:42.696Z  INFO 8752 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-04T12:46:42.892Z  INFO 8752 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:acmsdb user=SA
2025-12-04T12:46:42.894Z  INFO 8752 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-04T12:46:42.914Z  INFO 8752 --- [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:acmsdb'
2025-12-04T12:46:43.082Z  INFO 8752 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04T12:46:43.138Z  INFO 8752 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.7.Final
2025-12-04T12:46:43.147Z  INFO 8752 --- [restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer
2025-12-04T12:46:43.287Z  INFO 8752 --- [restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy
2025-12-04T12:46:43.439Z  INFO 8752 --- [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04T12:46:43.740Z  INFO 8752 --- [restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy
2025-12-04T12:46:44.499Z  INFO 8752 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-12-04T12:46:44.519Z DEBUG 8752 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists agents cascade 
2025-12-04T12:46:44.534Z DEBUG 8752 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists commissions cascade 
2025-12-04T12:46:44.538Z DEBUG 8752 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists payments cascade 
2025-12-04T12:46:44.539Z DEBUG 8752 --- [restartedMain] org.hibernate.SQL                        : 
    drop table if exists policies cascade 
2025-12-04T12:46:44.546Z DEBUG 8752 --- [restartedMain] org.hibernate.SQL                        : 
    create table agents (
        date_of_birth date,
        hire_date date,
        is_active BOOLEAN DEFAULT true not null,
        termination_date date,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        version bigint,
        phone varchar(15) not null,
        agent_code varchar(20) not null unique,
        postal_code varchar(20),
        status varchar(20) not null check (status in ('ACTIVE','INACTIVE','SUSPENDED','TERMINATED')),
        country varchar(50),
        first_name varchar(50) not null,
        last_name varchar(50) not null,
        middle_name varchar(50),
        state varchar(50),
        city varchar(100),
        created_by varchar(100) not null,
        email varchar(100) not null unique,
        updated_by varchar(100),
        address varchar(200),
        notes TEXT,
        primary key (id)
    )
2025-12-04T12:46:44.573Z DEBUG 8752 --- [restartedMain] org.hibernate.SQL                        : 
    create table commissions (
        calculation_date date,
        commission_amount numeric(14,2),
        commission_rate numeric(8,4),
        effective_date date,
        expiry_date date,
        is_active BOOLEAN DEFAULT true not null,
        payment_date date,
        premium_amount numeric(14,2),
        agent_id bigint not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        policy_id bigint not null,
        updated_at timestamp(6),
        version bigint,
        commission_type varchar(20) check (commission_type in ('PERCENTAGE','FIXED','TIERED','BONUS')),
        status varchar(20) check (status in ('PENDING','APPROVED','PAID','CANCELLED','HELD','FORFEITED')),
        created_by varchar(100) not null,
        payment_reference varchar(100),
        updated_by varchar(100),
        notes varchar(500),
        primary key (id)
    )
2025-12-04T12:46:44.578Z DEBUG 8752 --- [restartedMain] org.hibernate.SQL                        : 
    create table payments (
        is_active BOOLEAN DEFAULT true not null,
        payment_amount numeric(14,2) not null,
        payment_date date,
        processed_date date,
        agent_id bigint not null,
        commission_id bigint not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        version bigint,
        payment_method varchar(20) check (payment_method in ('BANK_TRANSFER','CHECK','CASH','WIRE_TRANSFER','DIRECT_DEPOSIT','ELECTRONIC_FUND_TRANSFER')),
        payment_status varchar(20) check (payment_status in ('PENDING','PROCESSING','COMPLETED','FAILED','CANCELLED','REVERSED')),
        bank_account varchar(50),
        bank_name varchar(100),
        created_by varchar(100) not null,
        payment_reference varchar(100) unique,
        transaction_id varchar(100),
        updated_by varchar(100),
        notes varchar(500),
        primary key (id)
    )
2025-12-04T12:46:44.647Z DEBUG 8752 --- [restartedMain] org.hibernate.SQL                        : 
    create table policies (
        cancellation_date date,
        coverage_amount numeric(14,2),
        deductible_amount numeric(14,2),
        effective_date date,
        expiration_date date,
        is_active BOOLEAN DEFAULT true not null,
        premium numeric(14,2),
        renewal_date date,
        agent_id bigint not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        version bigint,
        status varchar(20) not null check (status in ('ACTIVE','INACTIVE','PENDING','CANCELLED','EXPIRED','RENEWED','SUSPENDED')),
        group_number varchar(50),
        policy_number varchar(50) not null unique,
        created_by varchar(100) not null,
        group_name varchar(100),
        policy_type varchar(100) not null,
        updated_by varchar(100),
        cancellation_reason varchar(500),
        description varchar(500),
        primary key (id)
    )
2025-12-04T12:46:44.655Z DEBUG 8752 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists commissions 
       add constraint FKd8v22tv0b7qw3b2r2eme5uidd 
       foreign key (agent_id) 
       references agents
2025-12-04T12:46:44.679Z DEBUG 8752 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists commissions 
       add constraint FKdtggxohtssse1s800upf6ymy9 
       foreign key (policy_id) 
       references policies
2025-12-04T12:46:44.681Z DEBUG 8752 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists payments 
       add constraint FKrv70ecieoxbm3l4sts6a1oq58 
       foreign key (agent_id) 
       references agents
2025-12-04T12:46:44.683Z DEBUG 8752 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists payments 
       add constraint FKtb6vleukgiq0pyhpw36rakdwb 
       foreign key (commission_id) 
       references commissions
2025-12-04T12:46:44.685Z DEBUG 8752 --- [restartedMain] org.hibernate.SQL                        : 
    alter table if exists policies 
       add constraint FKevhjihuyyk0sdhjq6c1vwk3al 
       foreign key (agent_id) 
       references agents
2025-12-04T12:46:44.703Z  INFO 8752 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04T12:46:44.998Z  INFO 8752 --- [restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04T12:46:46.177Z  INFO 8752 --- [restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 6 endpoint(s) beneath base path '/actuator'
2025-12-04T12:46:46.232Z  WARN 8752 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-04T12:46:46.701Z  INFO 8752 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-12-04T12:46:46.788Z  INFO 8752 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path '/api'
2025-12-04T12:46:46.807Z  INFO 8752 --- [restartedMain] com.acms.AcmsApplication                 : Started AcmsApplication in 6.79 seconds (process running for 7.332)
2025-12-04T12:46:56.857Z  INFO 8752 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04T12:46:56.857Z  INFO 8752 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-04T12:46:56.859Z  INFO 8752 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-12-04T12:46:57.039Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.AgentService            : Creating new agent with code: AG002
2025-12-04T12:46:57.122Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T12:46:57.148Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T12:46:57.218Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T12:46:57.234Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T12:46:57.241Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.AgentService            : Created agent with id: 1
2025-12-04T12:54:25.205Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T12:55:05.314Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Creating new policy with number: POL-2023-001
2025-12-04T12:55:05.318Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T12:55:05.326Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T12:55:05.340Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Renewal date cannot be before expiration date

java.lang.IllegalArgumentException: Renewal date cannot be before expiration date
	at com.acms.service.PolicyService.validatePolicyDates(PolicyService.java:213) ~[classes/:na]
	at com.acms.service.PolicyService.createPolicy(PolicyService.java:73) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PolicyService$$SpringCGLIB$$0.createPolicy(<generated>) ~[classes/:na]
	at com.acms.controller.PolicyController.createPolicy(PolicyController.java:85) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T12:55:05.354Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Renewal date cannot be before expiration date]
2025-12-04T12:55:06.830Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.PolicyService           : Creating new policy with number: POL-2023-001
2025-12-04T12:55:06.831Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T12:55:06.832Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T12:55:06.834Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Renewal date cannot be before expiration date

java.lang.IllegalArgumentException: Renewal date cannot be before expiration date
	at com.acms.service.PolicyService.validatePolicyDates(PolicyService.java:213) ~[classes/:na]
	at com.acms.service.PolicyService.createPolicy(PolicyService.java:73) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PolicyService$$SpringCGLIB$$0.createPolicy(<generated>) ~[classes/:na]
	at com.acms.controller.PolicyController.createPolicy(PolicyController.java:85) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T12:55:06.838Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Renewal date cannot be before expiration date]
2025-12-04T12:55:34.285Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T13:00:22.125Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T13:01:22.599Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.PolicyService           : Creating new policy with number: POL-2023-001
2025-12-04T13:01:22.601Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T13:01:22.602Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:01:22.605Z ERROR 8752 --- [http-nio-8080-exec-8] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Renewal date cannot be before expiration date

java.lang.IllegalArgumentException: Renewal date cannot be before expiration date
	at com.acms.service.PolicyService.validatePolicyDates(PolicyService.java:213) ~[classes/:na]
	at com.acms.service.PolicyService.createPolicy(PolicyService.java:73) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PolicyService$$SpringCGLIB$$0.createPolicy(<generated>) ~[classes/:na]
	at com.acms.controller.PolicyController.createPolicy(PolicyController.java:85) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T13:01:22.609Z  WARN 8752 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Renewal date cannot be before expiration date]
2025-12-04T13:01:41.394Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.PolicyService           : Creating new policy with number: POL-2023-001
2025-12-04T13:01:41.395Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T13:01:41.397Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:01:41.399Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Renewal date cannot be before expiration date

java.lang.IllegalArgumentException: Renewal date cannot be before expiration date
	at com.acms.service.PolicyService.validatePolicyDates(PolicyService.java:213) ~[classes/:na]
	at com.acms.service.PolicyService.createPolicy(PolicyService.java:73) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PolicyService$$SpringCGLIB$$0.createPolicy(<generated>) ~[classes/:na]
	at com.acms.controller.PolicyController.createPolicy(PolicyController.java:85) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T13:01:41.402Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Renewal date cannot be before expiration date]
2025-12-04T13:05:17.531Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Creating new policy with number: POL-2023-001
2025-12-04T13:05:17.533Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T13:05:17.534Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:05:17.544Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T13:05:17.548Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T13:05:17.551Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Created policy with id: 1
2025-12-04T13:05:55.310Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T13:05:55.321Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:40:34.089Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.CommissionService       : Calculating commission for policy: 1, agent: 1, type: PERCENTAGE
2025-12-04T13:40:34.091Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T13:40:34.094Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:40:34.102Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T13:40:34.107Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission calculation is not valid for current policy dates

java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates
	at com.acms.service.CommissionService.calculateAndCreateCommission(CommissionService.java:94) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.calculateAndCreateCommission(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.createCommission(CommissionController.java:123) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T13:40:34.110Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates]
2025-12-04T13:40:36.818Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.CommissionService       : Calculating commission for policy: 1, agent: 1, type: PERCENTAGE
2025-12-04T13:40:36.820Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T13:40:36.823Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:40:36.827Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T13:40:36.829Z ERROR 8752 --- [http-nio-8080-exec-6] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission calculation is not valid for current policy dates

java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates
	at com.acms.service.CommissionService.calculateAndCreateCommission(CommissionService.java:94) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.calculateAndCreateCommission(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.createCommission(CommissionController.java:123) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T13:40:36.835Z  WARN 8752 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates]
2025-12-04T13:41:32.667Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.CommissionService       : Calculating commission for policy: 1, agent: 1, type: PERCENTAGE
2025-12-04T13:41:32.669Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T13:41:32.671Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:41:32.679Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T13:41:32.687Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission calculation is not valid for current policy dates

java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates
	at com.acms.service.CommissionService.calculateAndCreateCommission(CommissionService.java:94) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.calculateAndCreateCommission(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.createCommission(CommissionController.java:123) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T13:41:32.690Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates]
2025-12-04T13:42:45.699Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T13:42:45.702Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:44:25.134Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.CommissionService       : Calculating commission for policy: 1, agent: 1, type: PERCENTAGE
2025-12-04T13:44:25.137Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T13:44:25.139Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:44:25.141Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T13:44:25.144Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission calculation is not valid for current policy dates

java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates
	at com.acms.service.CommissionService.calculateAndCreateCommission(CommissionService.java:94) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.calculateAndCreateCommission(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.createCommission(CommissionController.java:123) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T13:44:25.148Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates]
2025-12-04T13:45:00.623Z  WARN 8752 --- [http-nio-8080-exec-4] o.s.web.servlet.PageNotFound             : Request method 'PUT' is not supported
2025-12-04T13:45:00.632Z  WARN 8752 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'PUT' is not supported]
2025-12-04T13:45:46.086Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.CommissionService       : Calculating commission for policy: 1, agent: 1, type: PERCENTAGE
2025-12-04T13:45:46.087Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T13:45:46.089Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:45:46.092Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T13:45:46.094Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission calculation is not valid for current policy dates

java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates
	at com.acms.service.CommissionService.calculateAndCreateCommission(CommissionService.java:94) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.calculateAndCreateCommission(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.createCommission(CommissionController.java:123) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T13:45:46.097Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates]
2025-12-04T13:48:26.781Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.CommissionService       : Calculating commission for policy: 1, agent: 1, type: PERCENTAGE
2025-12-04T13:48:26.782Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T13:48:26.784Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:48:26.787Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T13:48:26.789Z ERROR 8752 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission calculation is not valid for current policy dates

java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates
	at com.acms.service.CommissionService.calculateAndCreateCommission(CommissionService.java:94) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.calculateAndCreateCommission(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.createCommission(CommissionController.java:123) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T13:48:26.792Z  WARN 8752 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates]
2025-12-04T13:49:15.354Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.PolicyService           : Creating new policy with number: POL-2025-001
2025-12-04T13:49:15.356Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T13:49:15.357Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:49:15.359Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T13:49:15.361Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T13:49:15.364Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.PolicyService           : Created policy with id: 2
2025-12-04T13:50:02.918Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T13:51:10.335Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionService       : Calculating commission for policy: 2, agent: 1, type: PERCENTAGE
2025-12-04T13:51:10.336Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T13:51:10.338Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:51:10.341Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T13:51:10.342Z DEBUG 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T13:51:10.345Z DEBUG 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T13:51:10.356Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T13:51:10.358Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T13:51:10.360Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionService       : Created commission with id: 1 for policy: 2, agent: 1
2025-12-04T13:52:39.320Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.bank_account,
        p1_0.bank_name,
        p1_0.commission_id,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.notes,
        p1_0.payment_amount,
        p1_0.payment_date,
        p1_0.payment_method,
        p1_0.payment_reference,
        p1_0.processed_date,
        p1_0.payment_status,
        p1_0.transaction_id,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        payments p1_0 offset ? rows fetch first ? rows only
2025-12-04T13:52:59.975Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PaymentService          : Creating new payment for commission: 1, agent: 1
2025-12-04T13:52:59.977Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T13:52:59.979Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:52:59.982Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.bank_account,
        p1_0.bank_name,
        p1_0.commission_id,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.notes,
        p1_0.payment_amount,
        p1_0.payment_date,
        p1_0.payment_method,
        p1_0.payment_reference,
        p1_0.processed_date,
        p1_0.payment_status,
        p1_0.transaction_id,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        payments p1_0 
    where
        p1_0.commission_id=?
2025-12-04T13:52:59.993Z ERROR 8752 --- [http-nio-8080-exec-6] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission must be in PAID status to create payment

java.lang.IllegalArgumentException: Commission must be in PAID status to create payment
	at com.acms.service.PaymentService.createPayment(PaymentService.java:95) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PaymentService$$SpringCGLIB$$0.createPayment(<generated>) ~[classes/:na]
	at com.acms.controller.PaymentController.createPayment(PaymentController.java:104) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T13:52:59.996Z  WARN 8752 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission must be in PAID status to create payment]
2025-12-04T13:53:02.066Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.PaymentService          : Creating new payment for commission: 1, agent: 1
2025-12-04T13:53:02.067Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T13:53:02.069Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:53:02.087Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.bank_account,
        p1_0.bank_name,
        p1_0.commission_id,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.notes,
        p1_0.payment_amount,
        p1_0.payment_date,
        p1_0.payment_method,
        p1_0.payment_reference,
        p1_0.processed_date,
        p1_0.payment_status,
        p1_0.transaction_id,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        payments p1_0 
    where
        p1_0.commission_id=?
2025-12-04T13:53:02.098Z ERROR 8752 --- [http-nio-8080-exec-2] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission must be in PAID status to create payment

java.lang.IllegalArgumentException: Commission must be in PAID status to create payment
	at com.acms.service.PaymentService.createPayment(PaymentService.java:95) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PaymentService$$SpringCGLIB$$0.createPayment(<generated>) ~[classes/:na]
	at com.acms.controller.PaymentController.createPayment(PaymentController.java:104) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T13:53:02.101Z  WARN 8752 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission must be in PAID status to create payment]
2025-12-04T13:53:29.556Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.PaymentService          : Creating new payment for commission: 1, agent: 1
2025-12-04T13:53:29.557Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T13:53:29.559Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:53:29.562Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.bank_account,
        p1_0.bank_name,
        p1_0.commission_id,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.notes,
        p1_0.payment_amount,
        p1_0.payment_date,
        p1_0.payment_method,
        p1_0.payment_reference,
        p1_0.processed_date,
        p1_0.payment_status,
        p1_0.transaction_id,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        payments p1_0 
    where
        p1_0.commission_id=?
2025-12-04T13:53:29.563Z ERROR 8752 --- [http-nio-8080-exec-8] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission must be in PAID status to create payment

java.lang.IllegalArgumentException: Commission must be in PAID status to create payment
	at com.acms.service.PaymentService.createPayment(PaymentService.java:95) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PaymentService$$SpringCGLIB$$0.createPayment(<generated>) ~[classes/:na]
	at com.acms.controller.PaymentController.createPayment(PaymentController.java:104) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T13:53:29.564Z  WARN 8752 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission must be in PAID status to create payment]
2025-12-04T13:54:25.078Z  WARN 8752 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'status' for method parameter type CommissionStatus is not present]
2025-12-04T13:54:58.846Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.CommissionService       : Updating status to PAID for commission with id: 1
2025-12-04T13:54:58.847Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T13:54:58.850Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Invalid status transition from PENDING to PAID

java.lang.IllegalArgumentException: Invalid status transition from PENDING to PAID
	at com.acms.service.CommissionService.validateCommissionStatusTransition(CommissionService.java:268) ~[classes/:na]
	at com.acms.service.CommissionService.updateCommissionStatus(CommissionService.java:168) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:366) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:421) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.updateCommissionStatus(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.updateCommissionStatus(CommissionController.java:156) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:888) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T13:54:58.854Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Invalid status transition from PENDING to PAID]
2025-12-04T13:55:32.494Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.CommissionService       : Updating status to APPROVED for commission with id: 1
2025-12-04T13:55:32.495Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T13:55:32.499Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.CommissionService       : Updated status to APPROVED for commission with id: 1
2025-12-04T13:55:32.500Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T13:55:32.501Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:55:32.510Z  WARN 8752 --- [http-nio-8080-exec-1] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Commission] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T13:55:32.515Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    update
        commissions 
    set
        is_active=?,
        agent_id=?,
        calculation_date=?,
        commission_amount=?,
        commission_rate=?,
        commission_type=?,
        effective_date=?,
        expiry_date=?,
        notes=?,
        payment_date=?,
        payment_reference=?,
        policy_id=?,
        premium_amount=?,
        status=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T13:55:32.523Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T13:56:12.247Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.CommissionService       : Updating status to PAID for commission with id: 1
2025-12-04T13:56:12.248Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T13:56:12.250Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.CommissionService       : Updated status to PAID for commission with id: 1
2025-12-04T13:56:12.250Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T13:56:12.251Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:56:12.254Z  WARN 8752 --- [http-nio-8080-exec-3] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Commission] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T13:56:12.254Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    update
        commissions 
    set
        is_active=?,
        agent_id=?,
        calculation_date=?,
        commission_amount=?,
        commission_rate=?,
        commission_type=?,
        effective_date=?,
        expiry_date=?,
        notes=?,
        payment_date=?,
        payment_reference=?,
        policy_id=?,
        premium_amount=?,
        status=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T13:56:12.255Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T13:56:48.340Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.PaymentService          : Creating new payment for commission: 1, agent: 1
2025-12-04T13:56:48.342Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T13:56:48.343Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T13:56:48.346Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.bank_account,
        p1_0.bank_name,
        p1_0.commission_id,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.notes,
        p1_0.payment_amount,
        p1_0.payment_date,
        p1_0.payment_method,
        p1_0.payment_reference,
        p1_0.processed_date,
        p1_0.payment_status,
        p1_0.transaction_id,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        payments p1_0 
    where
        p1_0.commission_id=?
2025-12-04T13:56:48.353Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    insert 
    into
        payments
        (is_active,agent_id,bank_account,bank_name,commission_id,created_at,created_by,notes,payment_amount,payment_date,payment_method,payment_reference,processed_date,payment_status,transaction_id,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T13:56:48.360Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        payments p1_0 
    where
        p1_0.id=?
2025-12-04T13:56:48.362Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.PaymentService          : Created payment with id: 1
2025-12-04T13:56:48.362Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:15:05.540Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:15:05.550Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:15:05.559Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:15:05.574Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:15:05.578Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:15:05.579Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.AgentService            : Created agent with id: 2
2025-12-04T16:15:05.597Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:15:05.598Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:15:05.604Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Agent code already exists: TEST001

java.lang.IllegalArgumentException: Agent code already exists: TEST001
	at com.acms.service.AgentService.createAgent(AgentService.java:58) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:15:05.609Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Agent code already exists: TEST001]
2025-12-04T16:15:05.782Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:15:05.786Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:15:05.820Z ERROR 8752 --- [http-nio-8080-exec-8] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Agent code already exists: TEST001

java.lang.IllegalArgumentException: Agent code already exists: TEST001
	at com.acms.service.AgentService.createAgent(AgentService.java:58) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:15:05.824Z  WARN 8752 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Agent code already exists: TEST001]
2025-12-04T16:15:05.857Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:15:05.858Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:15:05.859Z ERROR 8752 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Agent code already exists: TEST001

java.lang.IllegalArgumentException: Agent code already exists: TEST001
	at com.acms.service.AgentService.createAgent(AgentService.java:58) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:15:05.861Z  WARN 8752 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Agent code already exists: TEST001]
2025-12-04T16:15:05.888Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:15:05.890Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:15:05.890Z ERROR 8752 --- [http-nio-8080-exec-5] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Agent code already exists: TEST001

java.lang.IllegalArgumentException: Agent code already exists: TEST001
	at com.acms.service.AgentService.createAgent(AgentService.java:58) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:15:05.893Z  WARN 8752 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Agent code already exists: TEST001]
2025-12-04T16:15:05.909Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:15:05.911Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:15:05.913Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Agent code already exists: TEST001

java.lang.IllegalArgumentException: Agent code already exists: TEST001
	at com.acms.service.AgentService.createAgent(AgentService.java:58) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:15:05.914Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Agent code already exists: TEST001]
2025-12-04T16:15:05.954Z ERROR 8752 --- [http-nio-8080-exec-6] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] 
2025-12-04T16:15:05.961Z  WARN 8752 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] ]
2025-12-04T16:15:05.983Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.PolicyService           : Fetching policy with id: 12345
2025-12-04T16:15:05.985Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:15:05.987Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Resource not found: Policy not found with id: 12345
2025-12-04T16:15:05.988Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Policy not found with id: 12345]
2025-12-04T16:15:06.004Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:15:06.006Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:15:06.007Z ERROR 8752 --- [http-nio-8080-exec-4] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Agent code already exists: TEST001

java.lang.IllegalArgumentException: Agent code already exists: TEST001
	at com.acms.service.AgentService.createAgent(AgentService.java:58) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:15:06.010Z  WARN 8752 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Agent code already exists: TEST001]
2025-12-04T16:15:06.019Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:15:06.024Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:15:06.032Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Agent code already exists: TEST001

java.lang.IllegalArgumentException: Agent code already exists: TEST001
	at com.acms.service.AgentService.createAgent(AgentService.java:58) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:15:06.035Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Agent code already exists: TEST001]
2025-12-04T16:15:06.052Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:15:06.079Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:15:06.079Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:15:06.081Z ERROR 8752 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Agent code already exists: TEST001

java.lang.IllegalArgumentException: Agent code already exists: TEST001
	at com.acms.service.AgentService.createAgent(AgentService.java:58) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:15:06.082Z  WARN 8752 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Agent code already exists: TEST001]
2025-12-04T16:15:06.097Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:15:06.099Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:15:06.100Z ERROR 8752 --- [http-nio-8080-exec-5] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Agent code already exists: TEST001

java.lang.IllegalArgumentException: Agent code already exists: TEST001
	at com.acms.service.AgentService.createAgent(AgentService.java:58) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:15:06.103Z  WARN 8752 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Agent code already exists: TEST001]
2025-12-04T16:15:06.118Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Method argument type mismatch: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; For input string: "commissions"
2025-12-04T16:15:06.125Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; For input string: "commissions"]
2025-12-04T16:15:06.181Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:15:27.511Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:31.190Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:16:31.191Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:16:31.192Z ERROR 8752 --- [http-nio-8080-exec-8] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Agent code already exists: TEST001

java.lang.IllegalArgumentException: Agent code already exists: TEST001
	at com.acms.service.AgentService.createAgent(AgentService.java:58) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:16:31.195Z  WARN 8752 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Agent code already exists: TEST001]
2025-12-04T16:16:31.346Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:31.354Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:31.360Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.AgentService            : Fetching agent with id: 1
2025-12-04T16:16:31.361Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.375Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:31.383Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] 
2025-12-04T16:16:31.384Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] ]
2025-12-04T16:16:31.397Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:31.407Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.AgentService            : Updating status to INACTIVE for agent with id: 1
2025-12-04T16:16:31.408Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.409Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.AgentService            : Updated status to INACTIVE for agent with id: 1
2025-12-04T16:16:31.410Z  WARN 8752 --- [http-nio-8080-exec-7] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:16:31.411Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:16:31.413Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.419Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Updating status to ACTIVE for agent with id: 1
2025-12-04T16:16:31.421Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.422Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Updated status to ACTIVE for agent with id: 1
2025-12-04T16:16:31.423Z  WARN 8752 --- [http-nio-8080-exec-9] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:16:31.424Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:16:31.424Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.432Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:16:31.434Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:16:31.434Z ERROR 8752 --- [http-nio-8080-exec-2] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Agent code already exists: TEST001

java.lang.IllegalArgumentException: Agent code already exists: TEST001
	at com.acms.service.AgentService.createAgent(AgentService.java:58) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:16:31.437Z  WARN 8752 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Agent code already exists: TEST001]
2025-12-04T16:16:31.444Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:31.445Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.453Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:31.464Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:31.466Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.477Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.CommissionService       : Calculating commission for policy: 1, agent: 1, type: PERCENTAGE
2025-12-04T16:16:31.478Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:16:31.480Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.483Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:16:31.484Z ERROR 8752 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission calculation is not valid for current policy dates

java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates
	at com.acms.service.CommissionService.calculateAndCreateCommission(CommissionService.java:94) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.calculateAndCreateCommission(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.createCommission(CommissionController.java:123) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:16:31.487Z  WARN 8752 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates]
2025-12-04T16:16:31.500Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:31.503Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:16:31.504Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.513Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:31.514Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:16:31.516Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.522Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.CommissionService       : Updating status to APPROVED for commission with id: 1
2025-12-04T16:16:31.523Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:16:31.526Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Paid commissions can only be cancelled

java.lang.IllegalArgumentException: Paid commissions can only be cancelled
	at com.acms.service.CommissionService.validateCommissionStatusTransition(CommissionService.java:280) ~[classes/:na]
	at com.acms.service.CommissionService.updateCommissionStatus(CommissionService.java:168) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:366) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:421) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.updateCommissionStatus(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.updateCommissionStatus(CommissionController.java:156) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:888) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:16:31.528Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Paid commissions can only be cancelled]
2025-12-04T16:16:31.539Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:31.542Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:16:31.543Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.553Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PaymentService          : Creating new payment for commission: 1, agent: 1
2025-12-04T16:16:31.554Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:16:31.556Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.558Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.bank_account,
        p1_0.bank_name,
        p1_0.commission_id,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.notes,
        p1_0.payment_amount,
        p1_0.payment_date,
        p1_0.payment_method,
        p1_0.payment_reference,
        p1_0.processed_date,
        p1_0.payment_status,
        p1_0.transaction_id,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        payments p1_0 
    where
        p1_0.commission_id=?
2025-12-04T16:16:31.560Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Payment already exists for commission 1

java.lang.IllegalArgumentException: Payment already exists for commission 1
	at com.acms.service.PaymentService.createPayment(PaymentService.java:90) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PaymentService$$SpringCGLIB$$0.createPayment(<generated>) ~[classes/:na]
	at com.acms.controller.PaymentController.createPayment(PaymentController.java:104) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:16:31.563Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Payment already exists for commission 1]
2025-12-04T16:16:31.576Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.bank_account,
        p1_0.bank_name,
        p1_0.commission_id,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.notes,
        p1_0.payment_amount,
        p1_0.payment_date,
        p1_0.payment_method,
        p1_0.payment_reference,
        p1_0.processed_date,
        p1_0.payment_status,
        p1_0.transaction_id,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        payments p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:31.578Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:16:31.580Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:16:31.581Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.591Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Creating new agent with code: DELETE-TEST
2025-12-04T16:16:31.592Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:16:31.594Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:16:31.596Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:16:31.597Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.597Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Created agent with id: 3
2025-12-04T16:16:31.603Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Deleting agent with id: 3
2025-12-04T16:16:31.604Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.606Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Soft deleted agent with id: 3
2025-12-04T16:16:31.606Z  WARN 8752 --- [http-nio-8080-exec-9] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:16:31.607Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:16:31.608Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:31.642Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:31.649Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Creating new agent with code: DUPLICATE001
2025-12-04T16:16:31.650Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:16:31.652Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:16:31.653Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: sai.vamshi@example.com

java.lang.IllegalArgumentException: Email already in use: sai.vamshi@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:16:31.655Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: sai.vamshi@example.com]
2025-12-04T16:16:36.681Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:16:36.682Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:16:36.683Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Agent code already exists: TEST001

java.lang.IllegalArgumentException: Agent code already exists: TEST001
	at com.acms.service.AgentService.createAgent(AgentService.java:58) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:16:36.685Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Agent code already exists: TEST001]
2025-12-04T16:16:54.341Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.AgentService            : Creating new agent with code: TEST9055
2025-12-04T16:16:54.343Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:16:54.345Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:16:54.346Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:16:54.348Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.349Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.AgentService            : Created agent with id: 4
2025-12-04T16:16:54.356Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:54.365Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:54.374Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.AgentService            : Fetching agent with id: 1
2025-12-04T16:16:54.376Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.388Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:54.397Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] 
2025-12-04T16:16:54.398Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] ]
2025-12-04T16:16:54.548Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:54.554Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.AgentService            : Updating status to INACTIVE for agent with id: 1
2025-12-04T16:16:54.555Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.556Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.AgentService            : Updated status to INACTIVE for agent with id: 1
2025-12-04T16:16:54.557Z  WARN 8752 --- [http-nio-8080-exec-1] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:16:54.558Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:16:54.559Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.565Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.AgentService            : Updating status to ACTIVE for agent with id: 1
2025-12-04T16:16:54.566Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.568Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.AgentService            : Updated status to ACTIVE for agent with id: 1
2025-12-04T16:16:54.569Z  WARN 8752 --- [http-nio-8080-exec-8] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:16:54.569Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:16:54.571Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.581Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Creating new agent with code: TEST7074
2025-12-04T16:16:54.582Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:16:54.583Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:16:54.586Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:16:54.588Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.590Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Created agent with id: 5
2025-12-04T16:16:54.595Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Creating new policy with number: POL-TEST-001
2025-12-04T16:16:54.596Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:16:54.598Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.601Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:16:54.601Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:16:54.602Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Created policy with id: 3
2025-12-04T16:16:54.611Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:54.613Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.616Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.626Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:54.634Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:54.636Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.637Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.643Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.CommissionService       : Calculating commission for policy: 1, agent: 1, type: PERCENTAGE
2025-12-04T16:16:54.644Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:16:54.645Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.648Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:16:54.650Z ERROR 8752 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission calculation is not valid for current policy dates

java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates
	at com.acms.service.CommissionService.calculateAndCreateCommission(CommissionService.java:94) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.calculateAndCreateCommission(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.createCommission(CommissionController.java:123) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:16:54.653Z  WARN 8752 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates]
2025-12-04T16:16:54.664Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:54.666Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:16:54.667Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.676Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:54.677Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:16:54.679Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.685Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.CommissionService       : Updating status to APPROVED for commission with id: 1
2025-12-04T16:16:54.686Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:16:54.688Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Paid commissions can only be cancelled

java.lang.IllegalArgumentException: Paid commissions can only be cancelled
	at com.acms.service.CommissionService.validateCommissionStatusTransition(CommissionService.java:280) ~[classes/:na]
	at com.acms.service.CommissionService.updateCommissionStatus(CommissionService.java:168) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:366) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:421) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.updateCommissionStatus(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.updateCommissionStatus(CommissionController.java:156) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:888) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:16:54.691Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Paid commissions can only be cancelled]
2025-12-04T16:16:54.704Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:54.705Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:16:54.707Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.714Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PaymentService          : Creating new payment for commission: 1, agent: 1
2025-12-04T16:16:54.714Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:16:54.716Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.722Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.bank_account,
        p1_0.bank_name,
        p1_0.commission_id,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.notes,
        p1_0.payment_amount,
        p1_0.payment_date,
        p1_0.payment_method,
        p1_0.payment_reference,
        p1_0.processed_date,
        p1_0.payment_status,
        p1_0.transaction_id,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        payments p1_0 
    where
        p1_0.commission_id=?
2025-12-04T16:16:54.724Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Payment already exists for commission 1

java.lang.IllegalArgumentException: Payment already exists for commission 1
	at com.acms.service.PaymentService.createPayment(PaymentService.java:90) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PaymentService$$SpringCGLIB$$0.createPayment(<generated>) ~[classes/:na]
	at com.acms.controller.PaymentController.createPayment(PaymentController.java:104) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:16:54.726Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Payment already exists for commission 1]
2025-12-04T16:16:54.739Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.bank_account,
        p1_0.bank_name,
        p1_0.commission_id,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.notes,
        p1_0.payment_amount,
        p1_0.payment_date,
        p1_0.payment_method,
        p1_0.payment_reference,
        p1_0.processed_date,
        p1_0.payment_status,
        p1_0.transaction_id,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        payments p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:54.741Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:16:54.742Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:16:54.744Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.752Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Creating new agent with code: DELETE6603
2025-12-04T16:16:54.754Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:16:54.755Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:16:54.756Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:16:54.758Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.758Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Created agent with id: 6
2025-12-04T16:16:54.763Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Deleting agent with id: 6
2025-12-04T16:16:54.763Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.765Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Soft deleted agent with id: 6
2025-12-04T16:16:54.766Z  WARN 8752 --- [http-nio-8080-exec-9] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:16:54.766Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:16:54.767Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.771Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.AgentService            : Fetching agent with id: 6
2025-12-04T16:16:54.771Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:16:54.796Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:54.801Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Creating new agent with code: DUPLICATE001
2025-12-04T16:16:54.802Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:16:54.804Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:16:54.805Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: sai.vamshi@example.com

java.lang.IllegalArgumentException: Email already in use: sai.vamshi@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:16:54.810Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: sai.vamshi@example.com]
2025-12-04T16:16:59.238Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:16:59.240Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:16:59.240Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:04.495Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.CommissionService       : Calculating commission for policy: 2, agent: 1, type: PERCENTAGE
2025-12-04T16:17:04.496Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:17:04.497Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:04.500Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:17:04.502Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission already exists for policy 2 and agent 1

java.lang.IllegalArgumentException: Commission already exists for policy 2 and agent 1
	at com.acms.service.CommissionService.calculateAndCreateCommission(CommissionService.java:83) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.calculateAndCreateCommission(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.createCommission(CommissionController.java:123) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:17:04.504Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission already exists for policy 2 and agent 1]
2025-12-04T16:17:14.007Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:17:14.015Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:17:14.017Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:14.018Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:14.029Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TEST8550
2025-12-04T16:17:14.030Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:17:14.032Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:14.033Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:17:14.034Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:17:14.034Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.PolicyService           : Created policy with id: 4
2025-12-04T16:17:14.041Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionService       : Calculating commission for policy: 4, agent: 1, type: PERCENTAGE
2025-12-04T16:17:14.041Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:17:14.043Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:14.045Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:17:14.047Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission calculation is not valid for current policy dates

java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates
	at com.acms.service.CommissionService.calculateAndCreateCommission(CommissionService.java:94) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.calculateAndCreateCommission(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.createCommission(CommissionController.java:123) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:17:14.049Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates]
2025-12-04T16:17:23.636Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:17:23.645Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:17:23.646Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:23.647Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:23.654Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.PolicyService           : Creating new policy with number: POL-TEST-001
2025-12-04T16:17:23.655Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:17:23.657Z ERROR 8752 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Policy number already exists: POL-TEST-001

java.lang.IllegalArgumentException: Policy number already exists: POL-TEST-001
	at com.acms.service.PolicyService.createPolicy(PolicyService.java:63) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PolicyService$$SpringCGLIB$$0.createPolicy(<generated>) ~[classes/:na]
	at com.acms.controller.PolicyController.createPolicy(PolicyController.java:85) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:17:23.658Z  WARN 8752 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Policy number already exists: POL-TEST-001]
2025-12-04T16:17:30.234Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:17:30.242Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:17:30.244Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:30.245Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:37.816Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:17:37.824Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:17:37.826Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:37.827Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:37.832Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TEST4445
2025-12-04T16:17:37.834Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:17:37.835Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:37.836Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:17:37.838Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:17:37.838Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Created policy with id: 5
2025-12-04T16:17:37.844Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.CommissionService       : Calculating commission for policy: 5, agent: 1, type: PERCENTAGE
2025-12-04T16:17:37.873Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:17:37.910Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:17:37.947Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:17:37.982Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission calculation is not valid for current policy dates

java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates
	at com.acms.service.CommissionService.calculateAndCreateCommission(CommissionService.java:94) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.calculateAndCreateCommission(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.createCommission(CommissionController.java:123) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:17:37.985Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates]
2025-12-04T16:18:03.638Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:03.643Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-9999
2025-12-04T16:18:03.645Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:18:03.646Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:03.649Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:18:03.650Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:03.650Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.PolicyService           : Created policy with id: 6
2025-12-04T16:18:07.394Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:07.402Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.CommissionService       : Calculating commission for policy: 6, agent: 1, type: PERCENTAGE
2025-12-04T16:18:07.402Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:07.404Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:07.406Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:18:07.407Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Commission calculation is not valid for current policy dates

java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates
	at com.acms.service.CommissionService.calculateAndCreateCommission(CommissionService.java:94) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.calculateAndCreateCommission(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.createCommission(CommissionController.java:123) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:18:07.409Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Commission calculation is not valid for current policy dates]
2025-12-04T16:18:16.381Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:16.388Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:16.390Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:16.391Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:16.397Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TEST4429
2025-12-04T16:18:16.398Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:18:16.399Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:16.402Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:18:16.403Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:16.404Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.PolicyService           : Created policy with id: 7
2025-12-04T16:18:16.409Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionService       : Calculating commission for policy: 7, agent: 1, type: PERCENTAGE
2025-12-04T16:18:16.410Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:16.411Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:16.413Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:18:16.414Z DEBUG 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:18:16.414Z DEBUG 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:18:16.416Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:18:16.418Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:18:16.419Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionService       : Created commission with id: 2 for policy: 7, agent: 1
2025-12-04T16:18:23.092Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.AgentService            : Creating new agent with code: TEST7719
2025-12-04T16:18:23.093Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:18:23.095Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:18:23.096Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:18:23.097Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.098Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.AgentService            : Created agent with id: 7
2025-12-04T16:18:23.106Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:23.113Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:23.121Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Fetching agent with id: 1
2025-12-04T16:18:23.122Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.130Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:23.137Z ERROR 8752 --- [http-nio-8080-exec-6] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] 
2025-12-04T16:18:23.139Z  WARN 8752 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] ]
2025-12-04T16:18:23.280Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:23.292Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.AgentService            : Updating status to INACTIVE for agent with id: 1
2025-12-04T16:18:23.292Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.293Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.AgentService            : Updated status to INACTIVE for agent with id: 1
2025-12-04T16:18:23.295Z  WARN 8752 --- [http-nio-8080-exec-8] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:18:23.295Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:18:23.297Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.302Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Updating status to ACTIVE for agent with id: 1
2025-12-04T16:18:23.302Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.303Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Updated status to ACTIVE for agent with id: 1
2025-12-04T16:18:23.304Z  WARN 8752 --- [http-nio-8080-exec-5] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:18:23.305Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:18:23.306Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.313Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.AgentService            : Creating new agent with code: TEST2414
2025-12-04T16:18:23.315Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:18:23.316Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:18:23.318Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:18:23.319Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.319Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.AgentService            : Created agent with id: 8
2025-12-04T16:18:23.326Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.PolicyService           : Creating new policy with number: POL-TEST-001
2025-12-04T16:18:23.328Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:18:23.329Z ERROR 8752 --- [http-nio-8080-exec-2] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Policy number already exists: POL-TEST-001

java.lang.IllegalArgumentException: Policy number already exists: POL-TEST-001
	at com.acms.service.PolicyService.createPolicy(PolicyService.java:63) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PolicyService$$SpringCGLIB$$0.createPolicy(<generated>) ~[classes/:na]
	at com.acms.controller.PolicyController.createPolicy(PolicyController.java:85) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:18:23.332Z  WARN 8752 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Policy number already exists: POL-TEST-001]
2025-12-04T16:18:23.347Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:23.349Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.351Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.358Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:23.367Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:23.369Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.370Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.377Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TEST2433
2025-12-04T16:18:23.380Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:18:23.381Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.382Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:18:23.384Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:23.384Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.PolicyService           : Created policy with id: 8
2025-12-04T16:18:23.390Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.CommissionService       : Calculating commission for policy: 8, agent: 1, type: PERCENTAGE
2025-12-04T16:18:23.391Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:23.392Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.393Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:18:23.395Z DEBUG 8752 --- [http-nio-8080-exec-5] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:18:23.396Z DEBUG 8752 --- [http-nio-8080-exec-5] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:18:23.397Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:18:23.397Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:18:23.398Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.CommissionService       : Created commission with id: 3 for policy: 8, agent: 1
2025-12-04T16:18:23.406Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:23.407Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:23.408Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.409Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:23.411Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:23.417Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:23.419Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:23.420Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.421Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:23.422Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:23.433Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.CommissionService       : Updating status to APPROVED for commission with id: 1
2025-12-04T16:18:23.434Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:18:23.435Z ERROR 8752 --- [http-nio-8080-exec-8] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Paid commissions can only be cancelled

java.lang.IllegalArgumentException: Paid commissions can only be cancelled
	at com.acms.service.CommissionService.validateCommissionStatusTransition(CommissionService.java:280) ~[classes/:na]
	at com.acms.service.CommissionService.updateCommissionStatus(CommissionService.java:168) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheInterceptor.lambda$invoke$0(CacheInterceptor.java:54) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheAspectSupport.invokeOperation(CacheAspectSupport.java:366) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:421) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:64) ~[spring-context-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.CommissionService$$SpringCGLIB$$0.updateCommissionStatus(<generated>) ~[classes/:na]
	at com.acms.controller.CommissionController.updateCommissionStatus(CommissionController.java:156) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:888) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:18:23.436Z  WARN 8752 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Paid commissions can only be cancelled]
2025-12-04T16:18:23.452Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:23.458Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:23.470Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.476Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:23.480Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:23.490Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.PaymentService          : Creating new payment for commission: 1, agent: 1
2025-12-04T16:18:23.493Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:18:23.501Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.505Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.bank_account,
        p1_0.bank_name,
        p1_0.commission_id,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.notes,
        p1_0.payment_amount,
        p1_0.payment_date,
        p1_0.payment_method,
        p1_0.payment_reference,
        p1_0.processed_date,
        p1_0.payment_status,
        p1_0.transaction_id,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        payments p1_0 
    where
        p1_0.commission_id=?
2025-12-04T16:18:23.506Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Payment already exists for commission 1

java.lang.IllegalArgumentException: Payment already exists for commission 1
	at com.acms.service.PaymentService.createPayment(PaymentService.java:90) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PaymentService$$SpringCGLIB$$0.createPayment(<generated>) ~[classes/:na]
	at com.acms.controller.PaymentController.createPayment(PaymentController.java:104) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:18:23.509Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Payment already exists for commission 1]
2025-12-04T16:18:23.527Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.bank_account,
        p1_0.bank_name,
        p1_0.commission_id,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.notes,
        p1_0.payment_amount,
        p1_0.payment_date,
        p1_0.payment_method,
        p1_0.payment_reference,
        p1_0.processed_date,
        p1_0.payment_status,
        p1_0.transaction_id,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        payments p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:23.530Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:18:23.530Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:18:23.531Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.539Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.AgentService            : Creating new agent with code: DELETE7191
2025-12-04T16:18:23.541Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:18:23.543Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:18:23.543Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:18:23.545Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.546Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.AgentService            : Created agent with id: 9
2025-12-04T16:18:23.550Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.AgentService            : Deleting agent with id: 9
2025-12-04T16:18:23.550Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.552Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.AgentService            : Soft deleted agent with id: 9
2025-12-04T16:18:23.553Z  WARN 8752 --- [http-nio-8080-exec-1] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:18:23.554Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:18:23.555Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.561Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Fetching agent with id: 9
2025-12-04T16:18:23.562Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:18:23.586Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:18:23.592Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.AgentService            : Creating new agent with code: DUPLICATE001
2025-12-04T16:18:23.594Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:18:23.595Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:18:23.596Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: sai.vamshi@example.com

java.lang.IllegalArgumentException: Email already in use: sai.vamshi@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:18:23.601Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: sai.vamshi@example.com]
2025-12-04T16:22:01.100Z ERROR 8752 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.createAgent(com.acms.dto.AgentDTO) with 4 errors: [Field error in object 'agentDTO' on field 'lastName': rejected value [null]; codes [NotBlank.agentDTO.lastName,NotBlank.lastName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.lastName,lastName]; arguments []; default message [lastName]]; default message [Last name is required]] [Field error in object 'agentDTO' on field 'firstName': rejected value [null]; codes [NotBlank.agentDTO.firstName,NotBlank.firstName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.firstName,firstName]; arguments []; default message [firstName]]; default message [First name is required]] [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] [Field error in object 'agentDTO' on field 'phone': rejected value [null]; codes [NotBlank.agentDTO.phone,NotBlank.phone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.phone,phone]; arguments []; default message [phone]]; default message [Phone number is required]] 
2025-12-04T16:22:01.102Z  WARN 8752 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.createAgent(com.acms.dto.AgentDTO) with 4 errors: [Field error in object 'agentDTO' on field 'lastName': rejected value [null]; codes [NotBlank.agentDTO.lastName,NotBlank.lastName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.lastName,lastName]; arguments []; default message [lastName]]; default message [Last name is required]] [Field error in object 'agentDTO' on field 'firstName': rejected value [null]; codes [NotBlank.agentDTO.firstName,NotBlank.firstName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.firstName,firstName]; arguments []; default message [firstName]]; default message [First name is required]] [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] [Field error in object 'agentDTO' on field 'phone': rejected value [null]; codes [NotBlank.agentDTO.phone,NotBlank.phone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.phone,phone]; arguments []; default message [phone]]; default message [Phone number is required]] ]
2025-12-04T16:22:01.246Z ERROR 8752 --- [http-nio-8080-exec-5] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO) with 4 errors: [Field error in object 'agentDTO' on field 'phone': rejected value [null]; codes [NotBlank.agentDTO.phone,NotBlank.phone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.phone,phone]; arguments []; default message [phone]]; default message [Phone number is required]] [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] [Field error in object 'agentDTO' on field 'lastName': rejected value [null]; codes [NotBlank.agentDTO.lastName,NotBlank.lastName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.lastName,lastName]; arguments []; default message [lastName]]; default message [Last name is required]] [Field error in object 'agentDTO' on field 'firstName': rejected value [null]; codes [NotBlank.agentDTO.firstName,NotBlank.firstName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.firstName,firstName]; arguments []; default message [firstName]]; default message [First name is required]] 
2025-12-04T16:22:01.247Z  WARN 8752 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO) with 4 errors: [Field error in object 'agentDTO' on field 'phone': rejected value [null]; codes [NotBlank.agentDTO.phone,NotBlank.phone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.phone,phone]; arguments []; default message [phone]]; default message [Phone number is required]] [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] [Field error in object 'agentDTO' on field 'lastName': rejected value [null]; codes [NotBlank.agentDTO.lastName,NotBlank.lastName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.lastName,lastName]; arguments []; default message [lastName]]; default message [Last name is required]] [Field error in object 'agentDTO' on field 'firstName': rejected value [null]; codes [NotBlank.agentDTO.firstName,NotBlank.firstName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.firstName,firstName]; arguments []; default message [firstName]]; default message [First name is required]] ]
2025-12-04T16:22:01.255Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Fetching agent with id: 12345
2025-12-04T16:22:01.256Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:22:01.258Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Resource not found: Agent not found with id: 12345
2025-12-04T16:22:01.258Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Agent not found with id: 12345]
2025-12-04T16:22:01.266Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.AgentService            : Deleting agent with id: 12345
2025-12-04T16:22:01.266Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:22:01.268Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Resource not found: Agent not found with id: 12345
2025-12-04T16:22:01.268Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Agent not found with id: 12345]
2025-12-04T16:22:01.277Z ERROR 8752 --- [http-nio-8080-exec-4] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] 
2025-12-04T16:22:01.280Z  WARN 8752 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] ]
2025-12-04T16:22:01.291Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] 
2025-12-04T16:22:01.292Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] ]
2025-12-04T16:22:01.299Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] 
2025-12-04T16:22:01.301Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] ]
2025-12-04T16:22:01.310Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.PolicyService           : Fetching policy with id: 12345
2025-12-04T16:22:01.311Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:22:01.312Z ERROR 8752 --- [http-nio-8080-exec-8] c.acms.exception.GlobalExceptionHandler  : Resource not found: Policy not found with id: 12345
2025-12-04T16:22:01.312Z  WARN 8752 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Policy not found with id: 12345]
2025-12-04T16:22:01.321Z ERROR 8752 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.CommissionDTO>> com.acms.controller.CommissionController.createCommission(com.acms.dto.CommissionDTO) with 2 errors: [Field error in object 'commissionDTO' on field 'agentId': rejected value [null]; codes [NotNull.commissionDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'commissionDTO' on field 'policyId': rejected value [null]; codes [NotNull.commissionDTO.policyId,NotNull.policyId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.policyId,policyId]; arguments []; default message [policyId]]; default message [Policy ID is required]] 
2025-12-04T16:22:01.322Z  WARN 8752 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.CommissionDTO>> com.acms.controller.CommissionController.createCommission(com.acms.dto.CommissionDTO) with 2 errors: [Field error in object 'commissionDTO' on field 'agentId': rejected value [null]; codes [NotNull.commissionDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'commissionDTO' on field 'policyId': rejected value [null]; codes [NotNull.commissionDTO.policyId,NotNull.policyId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.policyId,policyId]; arguments []; default message [policyId]]; default message [Policy ID is required]] ]
2025-12-04T16:22:01.330Z ERROR 8752 --- [http-nio-8080-exec-5] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.CommissionDTO>> com.acms.controller.CommissionController.createCommission(com.acms.dto.CommissionDTO) with 2 errors: [Field error in object 'commissionDTO' on field 'policyId': rejected value [null]; codes [NotNull.commissionDTO.policyId,NotNull.policyId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.policyId,policyId]; arguments []; default message [policyId]]; default message [Policy ID is required]] [Field error in object 'commissionDTO' on field 'agentId': rejected value [null]; codes [NotNull.commissionDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] 
2025-12-04T16:22:01.331Z  WARN 8752 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.CommissionDTO>> com.acms.controller.CommissionController.createCommission(com.acms.dto.CommissionDTO) with 2 errors: [Field error in object 'commissionDTO' on field 'policyId': rejected value [null]; codes [NotNull.commissionDTO.policyId,NotNull.policyId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.policyId,policyId]; arguments []; default message [policyId]]; default message [Policy ID is required]] [Field error in object 'commissionDTO' on field 'agentId': rejected value [null]; codes [NotNull.commissionDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] ]
2025-12-04T16:22:01.342Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:22:01.352Z ERROR 8752 --- [http-nio-8080-exec-4] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] 
2025-12-04T16:22:01.353Z  WARN 8752 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] ]
2025-12-04T16:22:01.361Z ERROR 8752 --- [http-nio-8080-exec-6] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] 
2025-12-04T16:22:01.362Z  WARN 8752 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] ]
2025-12-04T16:22:01.370Z ERROR 8752 --- [http-nio-8080-exec-2] c.acms.exception.GlobalExceptionHandler  : Method argument type mismatch: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; For input string: "commissions"
2025-12-04T16:22:01.371Z  WARN 8752 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; For input string: "commissions"]
2025-12-04T16:22:27.957Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.createAgent(com.acms.dto.AgentDTO) with 4 errors: [Field error in object 'agentDTO' on field 'firstName': rejected value [null]; codes [NotBlank.agentDTO.firstName,NotBlank.firstName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.firstName,firstName]; arguments []; default message [firstName]]; default message [First name is required]] [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] [Field error in object 'agentDTO' on field 'lastName': rejected value [null]; codes [NotBlank.agentDTO.lastName,NotBlank.lastName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.lastName,lastName]; arguments []; default message [lastName]]; default message [Last name is required]] [Field error in object 'agentDTO' on field 'phone': rejected value [null]; codes [NotBlank.agentDTO.phone,NotBlank.phone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.phone,phone]; arguments []; default message [phone]]; default message [Phone number is required]] 
2025-12-04T16:22:27.957Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.createAgent(com.acms.dto.AgentDTO) with 4 errors: [Field error in object 'agentDTO' on field 'firstName': rejected value [null]; codes [NotBlank.agentDTO.firstName,NotBlank.firstName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.firstName,firstName]; arguments []; default message [firstName]]; default message [First name is required]] [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] [Field error in object 'agentDTO' on field 'lastName': rejected value [null]; codes [NotBlank.agentDTO.lastName,NotBlank.lastName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.lastName,lastName]; arguments []; default message [lastName]]; default message [Last name is required]] [Field error in object 'agentDTO' on field 'phone': rejected value [null]; codes [NotBlank.agentDTO.phone,NotBlank.phone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.phone,phone]; arguments []; default message [phone]]; default message [Phone number is required]] ]
2025-12-04T16:22:28.079Z ERROR 8752 --- [http-nio-8080-exec-8] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO) with 4 errors: [Field error in object 'agentDTO' on field 'firstName': rejected value [null]; codes [NotBlank.agentDTO.firstName,NotBlank.firstName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.firstName,firstName]; arguments []; default message [firstName]]; default message [First name is required]] [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] [Field error in object 'agentDTO' on field 'lastName': rejected value [null]; codes [NotBlank.agentDTO.lastName,NotBlank.lastName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.lastName,lastName]; arguments []; default message [lastName]]; default message [Last name is required]] [Field error in object 'agentDTO' on field 'phone': rejected value [null]; codes [NotBlank.agentDTO.phone,NotBlank.phone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.phone,phone]; arguments []; default message [phone]]; default message [Phone number is required]] 
2025-12-04T16:22:28.082Z  WARN 8752 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO) with 4 errors: [Field error in object 'agentDTO' on field 'firstName': rejected value [null]; codes [NotBlank.agentDTO.firstName,NotBlank.firstName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.firstName,firstName]; arguments []; default message [firstName]]; default message [First name is required]] [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] [Field error in object 'agentDTO' on field 'lastName': rejected value [null]; codes [NotBlank.agentDTO.lastName,NotBlank.lastName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.lastName,lastName]; arguments []; default message [lastName]]; default message [Last name is required]] [Field error in object 'agentDTO' on field 'phone': rejected value [null]; codes [NotBlank.agentDTO.phone,NotBlank.phone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.phone,phone]; arguments []; default message [phone]]; default message [Phone number is required]] ]
2025-12-04T16:22:28.090Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.AgentService            : Fetching agent with id: 12345
2025-12-04T16:22:28.090Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:22:28.092Z ERROR 8752 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Resource not found: Agent not found with id: 12345
2025-12-04T16:22:28.092Z  WARN 8752 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Agent not found with id: 12345]
2025-12-04T16:22:28.105Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Deleting agent with id: 12345
2025-12-04T16:22:28.107Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:22:28.110Z ERROR 8752 --- [http-nio-8080-exec-5] c.acms.exception.GlobalExceptionHandler  : Resource not found: Agent not found with id: 12345
2025-12-04T16:22:28.112Z  WARN 8752 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Agent not found with id: 12345]
2025-12-04T16:22:28.123Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] 
2025-12-04T16:22:28.125Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] ]
2025-12-04T16:22:28.135Z ERROR 8752 --- [http-nio-8080-exec-6] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] 
2025-12-04T16:22:28.135Z  WARN 8752 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] ]
2025-12-04T16:22:28.144Z ERROR 8752 --- [http-nio-8080-exec-2] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] 
2025-12-04T16:22:28.144Z  WARN 8752 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] ]
2025-12-04T16:22:28.154Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Fetching policy with id: 12345
2025-12-04T16:22:28.154Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:22:28.156Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Resource not found: Policy not found with id: 12345
2025-12-04T16:22:28.157Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Policy not found with id: 12345]
2025-12-04T16:22:28.171Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.CommissionDTO>> com.acms.controller.CommissionController.createCommission(com.acms.dto.CommissionDTO) with 2 errors: [Field error in object 'commissionDTO' on field 'agentId': rejected value [null]; codes [NotNull.commissionDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'commissionDTO' on field 'policyId': rejected value [null]; codes [NotNull.commissionDTO.policyId,NotNull.policyId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.policyId,policyId]; arguments []; default message [policyId]]; default message [Policy ID is required]] 
2025-12-04T16:22:28.172Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.CommissionDTO>> com.acms.controller.CommissionController.createCommission(com.acms.dto.CommissionDTO) with 2 errors: [Field error in object 'commissionDTO' on field 'agentId': rejected value [null]; codes [NotNull.commissionDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'commissionDTO' on field 'policyId': rejected value [null]; codes [NotNull.commissionDTO.policyId,NotNull.policyId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.policyId,policyId]; arguments []; default message [policyId]]; default message [Policy ID is required]] ]
2025-12-04T16:22:28.184Z ERROR 8752 --- [http-nio-8080-exec-8] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.CommissionDTO>> com.acms.controller.CommissionController.createCommission(com.acms.dto.CommissionDTO) with 2 errors: [Field error in object 'commissionDTO' on field 'agentId': rejected value [null]; codes [NotNull.commissionDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'commissionDTO' on field 'policyId': rejected value [null]; codes [NotNull.commissionDTO.policyId,NotNull.policyId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.policyId,policyId]; arguments []; default message [policyId]]; default message [Policy ID is required]] 
2025-12-04T16:22:28.188Z  WARN 8752 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.CommissionDTO>> com.acms.controller.CommissionController.createCommission(com.acms.dto.CommissionDTO) with 2 errors: [Field error in object 'commissionDTO' on field 'agentId': rejected value [null]; codes [NotNull.commissionDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'commissionDTO' on field 'policyId': rejected value [null]; codes [NotNull.commissionDTO.policyId,NotNull.policyId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [commissionDTO.policyId,policyId]; arguments []; default message [policyId]]; default message [Policy ID is required]] ]
2025-12-04T16:22:28.199Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:22:28.217Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] 
2025-12-04T16:22:28.220Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] ]
2025-12-04T16:22:28.233Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] 
2025-12-04T16:22:28.234Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.createPolicy(com.acms.dto.PolicyDTO) with 3 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'policyNumber': rejected value [null]; codes [NotBlank.policyDTO.policyNumber,NotBlank.policyNumber,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyNumber,policyNumber]; arguments []; default message [policyNumber]]; default message [Policy number is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] ]
2025-12-04T16:22:28.244Z ERROR 8752 --- [http-nio-8080-exec-4] c.acms.exception.GlobalExceptionHandler  : Method argument type mismatch: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; For input string: "commissions"
2025-12-04T16:22:28.245Z  WARN 8752 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; For input string: "commissions"]
2025-12-04T16:23:34.968Z ERROR 8752 --- [http-nio-8080-exec-2] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.createAgent(com.acms.dto.AgentDTO) with 4 errors: [Field error in object 'agentDTO' on field 'phone': rejected value [null]; codes [NotBlank.agentDTO.phone,NotBlank.phone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.phone,phone]; arguments []; default message [phone]]; default message [Phone number is required]] [Field error in object 'agentDTO' on field 'firstName': rejected value [null]; codes [NotBlank.agentDTO.firstName,NotBlank.firstName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.firstName,firstName]; arguments []; default message [firstName]]; default message [First name is required]] [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] [Field error in object 'agentDTO' on field 'lastName': rejected value [null]; codes [NotBlank.agentDTO.lastName,NotBlank.lastName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.lastName,lastName]; arguments []; default message [lastName]]; default message [Last name is required]] 
2025-12-04T16:23:34.970Z  WARN 8752 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.createAgent(com.acms.dto.AgentDTO) with 4 errors: [Field error in object 'agentDTO' on field 'phone': rejected value [null]; codes [NotBlank.agentDTO.phone,NotBlank.phone,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.phone,phone]; arguments []; default message [phone]]; default message [Phone number is required]] [Field error in object 'agentDTO' on field 'firstName': rejected value [null]; codes [NotBlank.agentDTO.firstName,NotBlank.firstName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.firstName,firstName]; arguments []; default message [firstName]]; default message [First name is required]] [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] [Field error in object 'agentDTO' on field 'lastName': rejected value [null]; codes [NotBlank.agentDTO.lastName,NotBlank.lastName,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.lastName,lastName]; arguments []; default message [lastName]]; default message [Last name is required]] ]
2025-12-04T16:23:38.785Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.AgentService            : Creating new agent with code: TEST001
2025-12-04T16:23:38.787Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:23:38.788Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Agent code already exists: TEST001

java.lang.IllegalArgumentException: Agent code already exists: TEST001
	at com.acms.service.AgentService.createAgent(AgentService.java:58) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:23:38.793Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Agent code already exists: TEST001]
2025-12-04T16:23:56.647Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Creating new agent with code: TEST5921
2025-12-04T16:23:56.649Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:23:56.650Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:23:56.651Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:23:56.652Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:23:56.653Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Created agent with id: 10
2025-12-04T16:23:56.659Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.AgentService            : Creating new agent with code: TEST1657
2025-12-04T16:23:56.660Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:23:56.662Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:23:56.662Z ERROR 8752 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: johndoe@example.com

java.lang.IllegalArgumentException: Email already in use: johndoe@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:23:56.665Z  WARN 8752 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: johndoe@example.com]
2025-12-04T16:23:56.672Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Creating new agent with code: TEST5995
2025-12-04T16:23:56.673Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:23:56.673Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:23:56.674Z ERROR 8752 --- [http-nio-8080-exec-5] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: johndoe@example.com

java.lang.IllegalArgumentException: Email already in use: johndoe@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:23:56.679Z  WARN 8752 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: johndoe@example.com]
2025-12-04T16:23:56.685Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Creating new agent with code: TEST0114
2025-12-04T16:23:56.686Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:23:56.686Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:23:56.688Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: johndoe@example.com

java.lang.IllegalArgumentException: Email already in use: johndoe@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:23:56.691Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: johndoe@example.com]
2025-12-04T16:23:56.698Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.AgentService            : Creating new agent with code: TEST1620
2025-12-04T16:23:56.698Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:23:56.699Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:23:56.700Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: johndoe@example.com

java.lang.IllegalArgumentException: Email already in use: johndoe@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:23:56.703Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: johndoe@example.com]
2025-12-04T16:23:56.709Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.AgentService            : Creating new agent with code: TEST5297
2025-12-04T16:23:56.710Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:23:56.711Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:23:56.712Z ERROR 8752 --- [http-nio-8080-exec-4] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: johndoe@example.com

java.lang.IllegalArgumentException: Email already in use: johndoe@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:23:56.716Z  WARN 8752 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: johndoe@example.com]
2025-12-04T16:23:56.723Z ERROR 8752 --- [http-nio-8080-exec-6] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] 
2025-12-04T16:23:56.723Z  WARN 8752 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] ]
2025-12-04T16:23:56.858Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.PolicyService           : Fetching policy with id: 12345
2025-12-04T16:23:56.859Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:23:56.860Z ERROR 8752 --- [http-nio-8080-exec-2] c.acms.exception.GlobalExceptionHandler  : Resource not found: Policy not found with id: 12345
2025-12-04T16:23:56.862Z  WARN 8752 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Policy not found with id: 12345]
2025-12-04T16:23:56.868Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Creating new agent with code: TEST8945
2025-12-04T16:23:56.869Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:23:56.871Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:23:56.872Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: johndoe@example.com

java.lang.IllegalArgumentException: Email already in use: johndoe@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:23:56.877Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: johndoe@example.com]
2025-12-04T16:23:56.884Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.AgentService            : Creating new agent with code: TEST6951
2025-12-04T16:23:56.885Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:23:56.886Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:23:56.886Z ERROR 8752 --- [http-nio-8080-exec-8] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: johndoe@example.com

java.lang.IllegalArgumentException: Email already in use: johndoe@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:23:56.890Z  WARN 8752 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: johndoe@example.com]
2025-12-04T16:23:56.898Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:23:56.905Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.AgentService            : Creating new agent with code: TEST8671
2025-12-04T16:23:56.907Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:23:56.908Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:23:56.908Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: johndoe@example.com

java.lang.IllegalArgumentException: Email already in use: johndoe@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:23:56.912Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: johndoe@example.com]
2025-12-04T16:23:56.919Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.AgentService            : Creating new agent with code: TEST5588
2025-12-04T16:23:56.920Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:23:56.921Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:23:56.922Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: johndoe@example.com

java.lang.IllegalArgumentException: Email already in use: johndoe@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:23:56.925Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: johndoe@example.com]
2025-12-04T16:23:56.934Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:23:56.935Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:23:56.937Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:23:56.938Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:23:56.938Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:08.148Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.AgentService            : Creating new agent with code: TEST4313
2025-12-04T16:24:08.150Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:24:08.151Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:24:08.152Z ERROR 8752 --- [http-nio-8080-exec-2] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: johndoe@example.com

java.lang.IllegalArgumentException: Email already in use: johndoe@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:24:08.156Z  WARN 8752 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: johndoe@example.com]
2025-12-04T16:24:08.291Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.AgentService            : Creating new agent with code: TEST6195
2025-12-04T16:24:08.293Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:24:08.293Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:24:08.294Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: johndoe@example.com

java.lang.IllegalArgumentException: Email already in use: johndoe@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:24:08.297Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: johndoe@example.com]
2025-12-04T16:24:08.311Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] 
2025-12-04T16:24:08.312Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] ]
2025-12-04T16:24:08.324Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.PolicyService           : Fetching policy with id: 12345
2025-12-04T16:24:08.324Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:08.326Z ERROR 8752 --- [http-nio-8080-exec-8] c.acms.exception.GlobalExceptionHandler  : Resource not found: Policy not found with id: 12345
2025-12-04T16:24:08.326Z  WARN 8752 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Policy not found with id: 12345]
2025-12-04T16:24:08.336Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:24:08.350Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:24:08.351Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:08.352Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:08.353Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:08.354Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:12.551Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.AgentService            : Creating new agent with code: TEST3590
2025-12-04T16:24:12.553Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:24:12.555Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:24:12.556Z ERROR 8752 --- [http-nio-8080-exec-6] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Email already in use: johndoe@example.com

java.lang.IllegalArgumentException: Email already in use: johndoe@example.com
	at com.acms.service.AgentService.createAgent(AgentService.java:61) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor113.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.AgentService$$SpringCGLIB$$0.createAgent(<generated>) ~[classes/:na]
	at com.acms.controller.AgentController.createAgent(AgentController.java:83) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor112.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:24:12.560Z  WARN 8752 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Email already in use: johndoe@example.com]
2025-12-04T16:24:41.834Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.AgentService            : Creating new agent with code: TESTK2ER
2025-12-04T16:24:41.835Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:24:41.837Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:24:41.838Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:41.840Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:41.840Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.AgentService            : Created agent with id: 11
2025-12-04T16:24:41.847Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Creating new agent with code: TESTXK7H
2025-12-04T16:24:41.848Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:24:41.849Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:24:41.850Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:41.851Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:41.851Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Created agent with id: 12
2025-12-04T16:24:41.856Z ERROR 8752 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] 
2025-12-04T16:24:41.857Z  WARN 8752 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] ]
2025-12-04T16:24:41.995Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Fetching agent with id: 12
2025-12-04T16:24:41.996Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:42.003Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.AgentService            : Updating status to INACTIVE for agent with id: 12
2025-12-04T16:24:42.003Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:42.004Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.AgentService            : Updated status to INACTIVE for agent with id: 12
2025-12-04T16:24:42.005Z  WARN 8752 --- [http-nio-8080-exec-10] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:24:42.006Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:24:42.006Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:42.014Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Creating new policy with number: POL-Policy-ABC
2025-12-04T16:24:42.016Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:24:42.017Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:42.019Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:42.020Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:42.021Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Created policy with id: 9
2025-12-04T16:24:42.036Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Creating new policy with number: POL-Policy-DEF
2025-12-04T16:24:42.037Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:24:42.038Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:42.040Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:42.041Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:42.042Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Created policy with id: 10
2025-12-04T16:24:42.049Z ERROR 8752 --- [http-nio-8080-exec-8] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] 
2025-12-04T16:24:42.050Z  WARN 8752 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] ]
2025-12-04T16:24:42.063Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.PolicyService           : Fetching policy with id: 12345
2025-12-04T16:24:42.064Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:42.066Z ERROR 8752 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Resource not found: Policy not found with id: 12345
2025-12-04T16:24:42.067Z  WARN 8752 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Policy not found with id: 12345]
2025-12-04T16:24:42.075Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TEST4YCZ
2025-12-04T16:24:42.076Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:24:42.077Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:42.079Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:42.080Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:42.081Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.PolicyService           : Created policy with id: 11
2025-12-04T16:24:42.088Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.CommissionService       : Calculating commission for policy: 11, agent: 12, type: PERCENTAGE
2025-12-04T16:24:42.089Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:42.090Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:42.092Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:24:42.094Z DEBUG 8752 --- [http-nio-8080-exec-10] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:24:42.094Z DEBUG 8752 --- [http-nio-8080-exec-10] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:24:42.095Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:42.096Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:24:42.097Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.CommissionService       : Created commission with id: 4 for policy: 11, agent: 12
2025-12-04T16:24:42.104Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TESTZIZO
2025-12-04T16:24:42.107Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:24:42.110Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:42.113Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:42.114Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:42.114Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.PolicyService           : Created policy with id: 12
2025-12-04T16:24:42.119Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.CommissionService       : Calculating commission for policy: 12, agent: 12, type: PERCENTAGE
2025-12-04T16:24:42.120Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:42.121Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:42.123Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:24:42.124Z DEBUG 8752 --- [http-nio-8080-exec-1] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:24:42.125Z DEBUG 8752 --- [http-nio-8080-exec-1] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:24:42.125Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:42.127Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:24:42.127Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.CommissionService       : Created commission with id: 5 for policy: 12, agent: 12
2025-12-04T16:24:42.137Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:24:42.146Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.PolicyService           : Creating new policy with number: POL-LINK-Policy-ABC
2025-12-04T16:24:42.148Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:24:42.150Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:42.153Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:42.155Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:42.155Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.PolicyService           : Created policy with id: 13
2025-12-04T16:24:42.164Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.PolicyService           : Creating new policy with number: POL-LINK-Policy-DEF
2025-12-04T16:24:42.195Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:24:42.228Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:42.262Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:42.293Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:42.309Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.PolicyService           : Created policy with id: 14
2025-12-04T16:24:42.319Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:24:42.321Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:42.322Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:42.323Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:42.324Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:42.327Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:42.328Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:42.329Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:57.045Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.AgentService            : Creating new agent with code: TEST907H
2025-12-04T16:24:57.046Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:24:57.047Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:24:57.049Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:57.050Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:57.051Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.AgentService            : Created agent with id: 13
2025-12-04T16:24:57.056Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.AgentService            : Creating new agent with code: TESTIYUI
2025-12-04T16:24:57.056Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:24:57.056Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:24:57.056Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:57.056Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:57.061Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.AgentService            : Created agent with id: 14
2025-12-04T16:24:57.067Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] 
2025-12-04T16:24:57.068Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] ]
2025-12-04T16:24:57.214Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.AgentService            : Fetching agent with id: 14
2025-12-04T16:24:57.214Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:57.221Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.AgentService            : Updating status to INACTIVE for agent with id: 14
2025-12-04T16:24:57.221Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:57.222Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.AgentService            : Updated status to INACTIVE for agent with id: 14
2025-12-04T16:24:57.224Z  WARN 8752 --- [http-nio-8080-exec-6] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:24:57.225Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:24:57.226Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:57.236Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.PolicyService           : Creating new policy with number: POL-Policy-ABC
2025-12-04T16:24:57.244Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:24:57.245Z ERROR 8752 --- [http-nio-8080-exec-2] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Policy number already exists: POL-Policy-ABC

java.lang.IllegalArgumentException: Policy number already exists: POL-Policy-ABC
	at com.acms.service.PolicyService.createPolicy(PolicyService.java:63) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor210.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PolicyService$$SpringCGLIB$$0.createPolicy(<generated>) ~[classes/:na]
	at com.acms.controller.PolicyController.createPolicy(PolicyController.java:85) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor209.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:24:57.250Z  WARN 8752 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Policy number already exists: POL-Policy-ABC]
2025-12-04T16:24:57.260Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Creating new policy with number: POL-Policy-DEF
2025-12-04T16:24:57.260Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:24:57.261Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Policy number already exists: POL-Policy-DEF

java.lang.IllegalArgumentException: Policy number already exists: POL-Policy-DEF
	at com.acms.service.PolicyService.createPolicy(PolicyService.java:63) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor210.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PolicyService$$SpringCGLIB$$0.createPolicy(<generated>) ~[classes/:na]
	at com.acms.controller.PolicyController.createPolicy(PolicyController.java:85) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor209.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:24:57.265Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Policy number already exists: POL-Policy-DEF]
2025-12-04T16:24:57.274Z ERROR 8752 --- [http-nio-8080-exec-8] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] 
2025-12-04T16:24:57.275Z  WARN 8752 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] ]
2025-12-04T16:24:57.292Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.PolicyService           : Fetching policy with id: 12345
2025-12-04T16:24:57.294Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:57.294Z ERROR 8752 --- [http-nio-8080-exec-3] c.acms.exception.GlobalExceptionHandler  : Resource not found: Policy not found with id: 12345
2025-12-04T16:24:57.295Z  WARN 8752 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Policy not found with id: 12345]
2025-12-04T16:24:57.301Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TEST1K8O
2025-12-04T16:24:57.301Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:24:57.301Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:57.304Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:57.306Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:57.307Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.PolicyService           : Created policy with id: 15
2025-12-04T16:24:57.313Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionService       : Calculating commission for policy: 15, agent: 14, type: PERCENTAGE
2025-12-04T16:24:57.314Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:57.315Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:57.320Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:24:57.323Z DEBUG 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:24:57.325Z DEBUG 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:24:57.327Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:57.328Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:24:57.329Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionService       : Created commission with id: 6 for policy: 15, agent: 14
2025-12-04T16:24:57.337Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TESTKU7U
2025-12-04T16:24:57.338Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:24:57.340Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:57.350Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:57.354Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:57.355Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Created policy with id: 16
2025-12-04T16:24:57.361Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.CommissionService       : Calculating commission for policy: 16, agent: 14, type: PERCENTAGE
2025-12-04T16:24:57.362Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:57.363Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:57.365Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:24:57.367Z DEBUG 8752 --- [http-nio-8080-exec-2] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:24:57.367Z DEBUG 8752 --- [http-nio-8080-exec-2] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:24:57.368Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:24:57.369Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:24:57.371Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.CommissionService       : Created commission with id: 7 for policy: 16, agent: 14
2025-12-04T16:24:57.385Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:24:57.477Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.PolicyService           : Creating new policy with number: POL-LINK-Policy-ABC
2025-12-04T16:24:57.515Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:24:57.553Z ERROR 8752 --- [http-nio-8080-exec-5] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Policy number already exists: POL-LINK-Policy-ABC

java.lang.IllegalArgumentException: Policy number already exists: POL-LINK-Policy-ABC
	at com.acms.service.PolicyService.createPolicy(PolicyService.java:63) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor210.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PolicyService$$SpringCGLIB$$0.createPolicy(<generated>) ~[classes/:na]
	at com.acms.controller.PolicyController.createPolicy(PolicyController.java:85) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor209.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:24:57.562Z  WARN 8752 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Policy number already exists: POL-LINK-Policy-ABC]
2025-12-04T16:24:57.571Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.PolicyService           : Creating new policy with number: POL-LINK-Policy-DEF
2025-12-04T16:24:57.572Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:24:57.573Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Unexpected error: Policy number already exists: POL-LINK-Policy-DEF

java.lang.IllegalArgumentException: Policy number already exists: POL-LINK-Policy-DEF
	at com.acms.service.PolicyService.createPolicy(PolicyService.java:63) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor210.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.11.jar:6.0.11]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.11.jar:6.0.11]
	at com.acms.service.PolicyService$$SpringCGLIB$$0.createPolicy(<generated>) ~[classes/:na]
	at com.acms.controller.PolicyController.createPolicy(PolicyController.java:85) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor209.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]

2025-12-04T16:24:57.579Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.IllegalArgumentException: Policy number already exists: POL-LINK-Policy-DEF]
2025-12-04T16:24:57.617Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:24:57.619Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:57.620Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:57.621Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:57.622Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:57.627Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:57.629Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:57.631Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:57.635Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:24:57.636Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:24:57.636Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:25.418Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Creating new policy with number: POL-Policy-ABC-PHP5
2025-12-04T16:25:25.419Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:25:25.420Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:25.422Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:25:25.423Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:25.424Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Created policy with id: 17
2025-12-04T16:25:33.904Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 offset ? rows fetch first ? rows only
2025-12-04T16:25:33.907Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:33.907Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:33.908Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:33.909Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:49.915Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Creating new agent with code: TESTTXB4
2025-12-04T16:25:49.917Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:25:49.919Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:25:49.920Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:25:49.921Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:49.922Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Created agent with id: 15
2025-12-04T16:25:49.930Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Creating new agent with code: TESTO8JL
2025-12-04T16:25:49.931Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:25:49.933Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:25:49.934Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:25:49.935Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:49.935Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Created agent with id: 16
2025-12-04T16:25:49.942Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] 
2025-12-04T16:25:49.943Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] ]
2025-12-04T16:25:50.101Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.AgentService            : Fetching agent with id: 16
2025-12-04T16:25:50.101Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.108Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.AgentService            : Updating status to INACTIVE for agent with id: 16
2025-12-04T16:25:50.109Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.109Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.AgentService            : Updated status to INACTIVE for agent with id: 16
2025-12-04T16:25:50.111Z  WARN 8752 --- [http-nio-8080-exec-2] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:25:50.111Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:25:50.113Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.122Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.PolicyService           : Creating new policy with number: POL-Policy-ABC-TESTV7YB
2025-12-04T16:25:50.123Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:25:50.124Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.126Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:25:50.126Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.128Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.PolicyService           : Created policy with id: 18
2025-12-04T16:25:50.136Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.PolicyService           : Creating new policy with number: POL-Policy-DEF-TESTRENB
2025-12-04T16:25:50.136Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:25:50.138Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.139Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:25:50.141Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.141Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.PolicyService           : Created policy with id: 19
2025-12-04T16:25:50.150Z ERROR 8752 --- [http-nio-8080-exec-9] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] 
2025-12-04T16:25:50.151Z  WARN 8752 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] ]
2025-12-04T16:25:50.161Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.PolicyService           : Fetching policy with id: 12345
2025-12-04T16:25:50.161Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.162Z ERROR 8752 --- [http-nio-8080-exec-10] c.acms.exception.GlobalExceptionHandler  : Resource not found: Policy not found with id: 12345
2025-12-04T16:25:50.164Z  WARN 8752 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Policy not found with id: 12345]
2025-12-04T16:25:50.170Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TESTPEDC
2025-12-04T16:25:50.171Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:25:50.172Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.174Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:25:50.175Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.175Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Created policy with id: 20
2025-12-04T16:25:50.183Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.CommissionService       : Calculating commission for policy: 20, agent: 16, type: PERCENTAGE
2025-12-04T16:25:50.184Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.185Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.188Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:25:50.189Z DEBUG 8752 --- [http-nio-8080-exec-2] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:25:50.190Z DEBUG 8752 --- [http-nio-8080-exec-2] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:25:50.191Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:25:50.192Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:25:50.192Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.CommissionService       : Created commission with id: 8 for policy: 20, agent: 16
2025-12-04T16:25:50.200Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TESTN8NT
2025-12-04T16:25:50.201Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:25:50.202Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.204Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:25:50.205Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.205Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.PolicyService           : Created policy with id: 21
2025-12-04T16:25:50.211Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.CommissionService       : Calculating commission for policy: 21, agent: 16, type: PERCENTAGE
2025-12-04T16:25:50.212Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.212Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.215Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:25:50.216Z DEBUG 8752 --- [http-nio-8080-exec-7] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:25:50.216Z DEBUG 8752 --- [http-nio-8080-exec-7] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:25:50.217Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:25:50.218Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:25:50.218Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.CommissionService       : Created commission with id: 9 for policy: 21, agent: 16
2025-12-04T16:25:50.227Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:25:50.236Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Creating new policy with number: POL-LINK-Policy-ABC-TESTUURV
2025-12-04T16:25:50.236Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:25:50.238Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.240Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:25:50.242Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.242Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Created policy with id: 22
2025-12-04T16:25:50.251Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Creating new policy with number: POL-LINK-Policy-DEF-TEST7UWX
2025-12-04T16:25:50.252Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:25:50.253Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.255Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:25:50.256Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.256Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Created policy with id: 23
2025-12-04T16:25:50.264Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:25:50.265Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.267Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.267Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.268Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.269Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.270Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.271Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.271Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.272Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.272Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.274Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:25:50.275Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:25:50.276Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.257Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Creating new agent with code: TEST0C3J
2025-12-04T16:26:03.258Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:26:03.259Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:26:03.260Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:03.262Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.263Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Created agent with id: 17
2025-12-04T16:26:03.269Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.AgentService            : Creating new agent with code: TESTK9PH
2025-12-04T16:26:03.270Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:26:03.271Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:26:03.271Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:03.271Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.274Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.AgentService            : Created agent with id: 18
2025-12-04T16:26:03.278Z ERROR 8752 --- [http-nio-8080-exec-6] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] 
2025-12-04T16:26:03.278Z  WARN 8752 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] ]
2025-12-04T16:26:03.419Z  INFO 8752 --- [http-nio-8080-exec-2] com.acms.service.AgentService            : Fetching agent with id: 18
2025-12-04T16:26:03.420Z DEBUG 8752 --- [http-nio-8080-exec-2] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.426Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.AgentService            : Updating status to INACTIVE for agent with id: 18
2025-12-04T16:26:03.426Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.429Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.AgentService            : Updated status to INACTIVE for agent with id: 18
2025-12-04T16:26:03.430Z  WARN 8752 --- [http-nio-8080-exec-8] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:26:03.430Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:26:03.431Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.440Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.PolicyService           : Creating new policy with number: POL-Policy-ABC-TEST9BLP
2025-12-04T16:26:03.447Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:03.452Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.454Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:03.456Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.456Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.PolicyService           : Created policy with id: 24
2025-12-04T16:26:03.465Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.PolicyService           : Creating new policy with number: POL-Policy-DEF-TEST4DET
2025-12-04T16:26:03.465Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:03.468Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.475Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:03.481Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.482Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.PolicyService           : Created policy with id: 25
2025-12-04T16:26:03.491Z ERROR 8752 --- [http-nio-8080-exec-4] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] 
2025-12-04T16:26:03.491Z  WARN 8752 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] ]
2025-12-04T16:26:03.505Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Fetching policy with id: 12345
2025-12-04T16:26:03.507Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.508Z ERROR 8752 --- [http-nio-8080-exec-6] c.acms.exception.GlobalExceptionHandler  : Resource not found: Policy not found with id: 12345
2025-12-04T16:26:03.512Z  WARN 8752 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Policy not found with id: 12345]
2025-12-04T16:26:03.521Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TESTBR6Z
2025-12-04T16:26:03.522Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:03.524Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.526Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:03.527Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.527Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Created policy with id: 26
2025-12-04T16:26:03.539Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.CommissionService       : Calculating commission for policy: 26, agent: 18, type: PERCENTAGE
2025-12-04T16:26:03.541Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.543Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.547Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:26:03.548Z DEBUG 8752 --- [http-nio-8080-exec-8] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:26:03.548Z DEBUG 8752 --- [http-nio-8080-exec-8] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:26:03.548Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:03.549Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:26:03.550Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.CommissionService       : Created commission with id: 10 for policy: 26, agent: 18
2025-12-04T16:26:03.560Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TEST2LEK
2025-12-04T16:26:03.561Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:03.565Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.568Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:03.572Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.572Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.PolicyService           : Created policy with id: 27
2025-12-04T16:26:03.578Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionService       : Calculating commission for policy: 27, agent: 18, type: PERCENTAGE
2025-12-04T16:26:03.579Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.580Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.581Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:26:03.582Z DEBUG 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:26:03.583Z DEBUG 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:26:03.588Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:03.593Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:26:03.595Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.CommissionService       : Created commission with id: 11 for policy: 27, agent: 18
2025-12-04T16:26:03.603Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:26:03.613Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Creating new policy with number: POL-LINK-Policy-ABC-TESTVWBN
2025-12-04T16:26:03.614Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:03.615Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.617Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:03.618Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.618Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Created policy with id: 28
2025-12-04T16:26:03.627Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.PolicyService           : Creating new policy with number: POL-LINK-Policy-DEF-TESTCIFN
2025-12-04T16:26:03.632Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:03.638Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.641Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:03.642Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.643Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.PolicyService           : Created policy with id: 29
2025-12-04T16:26:03.651Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:26:03.656Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.669Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.669Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.671Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.673Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.673Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.674Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.674Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.675Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.676Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.677Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.678Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.680Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.680Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:03.682Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:03.682Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.776Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.AgentService            : Creating new agent with code: TESTLKBL
2025-12-04T16:26:36.778Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:26:36.779Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:26:36.780Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:36.781Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.782Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.AgentService            : Created agent with id: 19
2025-12-04T16:26:36.789Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.AgentService            : Creating new agent with code: TESTRNX0
2025-12-04T16:26:36.791Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:26:36.791Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:26:36.793Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:36.793Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.793Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.AgentService            : Created agent with id: 20
2025-12-04T16:26:36.798Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] 
2025-12-04T16:26:36.798Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] ]
2025-12-04T16:26:36.805Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.AgentService            : Fetching agent with id: 20
2025-12-04T16:26:36.805Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.811Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Updating status to INACTIVE for agent with id: 20
2025-12-04T16:26:36.812Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.812Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Updated status to INACTIVE for agent with id: 20
2025-12-04T16:26:36.814Z  WARN 8752 --- [http-nio-8080-exec-3] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:26:36.814Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:26:36.815Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.823Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.PolicyService           : Creating new policy with number: POL-Policy-ABC-TESTLXQS
2025-12-04T16:26:36.824Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:36.824Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.825Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:36.826Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.826Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.PolicyService           : Created policy with id: 30
2025-12-04T16:26:36.835Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.PolicyService           : Creating new policy with number: POL-Policy-DEF-TESTMX5Z
2025-12-04T16:26:36.836Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:36.838Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.839Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:36.840Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.841Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.PolicyService           : Created policy with id: 31
2025-12-04T16:26:36.847Z ERROR 8752 --- [http-nio-8080-exec-2] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] 
2025-12-04T16:26:36.847Z  WARN 8752 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] ]
2025-12-04T16:26:36.854Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.PolicyService           : Fetching policy with id: 12345
2025-12-04T16:26:36.854Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.856Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Resource not found: Policy not found with id: 12345
2025-12-04T16:26:36.857Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Policy not found with id: 12345]
2025-12-04T16:26:36.861Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TESTBFA4
2025-12-04T16:26:36.863Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:36.864Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.865Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:36.867Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.867Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.PolicyService           : Created policy with id: 32
2025-12-04T16:26:36.872Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.CommissionService       : Calculating commission for policy: 32, agent: 20, type: PERCENTAGE
2025-12-04T16:26:36.873Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.874Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.876Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:26:36.876Z DEBUG 8752 --- [http-nio-8080-exec-3] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:26:36.876Z DEBUG 8752 --- [http-nio-8080-exec-3] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:26:36.876Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:36.879Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:26:36.879Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.CommissionService       : Created commission with id: 12 for policy: 32, agent: 20
2025-12-04T16:26:36.887Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TESTZL2B
2025-12-04T16:26:36.888Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:36.888Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.889Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:36.889Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.891Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.PolicyService           : Created policy with id: 33
2025-12-04T16:26:36.895Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.CommissionService       : Calculating commission for policy: 33, agent: 20, type: PERCENTAGE
2025-12-04T16:26:36.896Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.896Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.898Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:26:36.900Z DEBUG 8752 --- [http-nio-8080-exec-4] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:26:36.900Z DEBUG 8752 --- [http-nio-8080-exec-4] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:26:36.901Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:36.902Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:26:36.902Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.CommissionService       : Created commission with id: 13 for policy: 33, agent: 20
2025-12-04T16:26:36.909Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:26:36.916Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        count(a1_0.id) 
    from
        agents a1_0
2025-12-04T16:26:36.924Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.PolicyService           : Creating new policy with number: POL-LINK-Policy-ABC-TESTU86Q
2025-12-04T16:26:36.924Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:36.926Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.927Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:36.928Z DEBUG 8752 --- [http-nio-8080-exec-7] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.929Z  INFO 8752 --- [http-nio-8080-exec-7] com.acms.service.PolicyService           : Created policy with id: 34
2025-12-04T16:26:36.936Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.PolicyService           : Creating new policy with number: POL-LINK-Policy-DEF-TESTZKYG
2025-12-04T16:26:36.936Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:36.937Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.939Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:36.940Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.941Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.PolicyService           : Created policy with id: 35
2025-12-04T16:26:36.948Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:26:36.949Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.950Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.950Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.951Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.952Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.953Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.954Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.955Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.956Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.956Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.958Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.959Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.959Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.961Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.961Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.962Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.962Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:36.962Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:36.964Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.100Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.AgentService            : Creating new agent with code: TEST87UY
2025-12-04T16:26:52.101Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:26:52.102Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:26:52.104Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:52.105Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.105Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.AgentService            : Created agent with id: 21
2025-12-04T16:26:52.111Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.AgentService            : Creating new agent with code: TESTR2HS
2025-12-04T16:26:52.112Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.agent_code=? fetch first ? rows only
2025-12-04T16:26:52.114Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.id 
    from
        agents a1_0 
    where
        a1_0.email=? fetch first ? rows only
2025-12-04T16:26:52.114Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    insert 
    into
        agents
        (is_active,address,agent_code,city,country,created_at,created_by,date_of_birth,email,first_name,hire_date,last_name,middle_name,notes,phone,postal_code,state,status,termination_date,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:52.115Z DEBUG 8752 --- [http-nio-8080-exec-1] org.hibernate.SQL                        : 
    select
        a1_0.created_at,
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.116Z  INFO 8752 --- [http-nio-8080-exec-1] com.acms.service.AgentService            : Created agent with id: 22
2025-12-04T16:26:52.121Z ERROR 8752 --- [http-nio-8080-exec-7] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] 
2025-12-04T16:26:52.121Z  WARN 8752 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.AgentDTO>> com.acms.controller.AgentController.updateAgent(java.lang.Long,com.acms.dto.AgentDTO): [Field error in object 'agentDTO' on field 'agentCode': rejected value [null]; codes [NotBlank.agentDTO.agentCode,NotBlank.agentCode,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [agentDTO.agentCode,agentCode]; arguments []; default message [agentCode]]; default message [Agent code is required]] ]
2025-12-04T16:26:52.131Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.AgentService            : Fetching agent with id: 22
2025-12-04T16:26:52.134Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.144Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Updating status to INACTIVE for agent with id: 22
2025-12-04T16:26:52.146Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.147Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.AgentService            : Updated status to INACTIVE for agent with id: 22
2025-12-04T16:26:52.147Z  WARN 8752 --- [http-nio-8080-exec-5] o.h.p.entity.AbstractEntityPersister     : HHH000502: The [updatedAt] property of the [com.acms.model.Agent] entity was modified, but it won't be updated because the property is immutable.
2025-12-04T16:26:52.148Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    update
        agents 
    set
        is_active=?,
        address=?,
        agent_code=?,
        city=?,
        country=?,
        date_of_birth=?,
        email=?,
        first_name=?,
        hire_date=?,
        last_name=?,
        middle_name=?,
        notes=?,
        phone=?,
        postal_code=?,
        state=?,
        status=?,
        termination_date=?,
        updated_at=localtimestamp,
        updated_by=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-04T16:26:52.148Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.updated_at 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.157Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.PolicyService           : Creating new policy with number: POL-Policy-ABC-TESTYCV1
2025-12-04T16:26:52.158Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:52.159Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.160Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:52.162Z DEBUG 8752 --- [http-nio-8080-exec-10] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.165Z  INFO 8752 --- [http-nio-8080-exec-10] com.acms.service.PolicyService           : Created policy with id: 36
2025-12-04T16:26:52.179Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Creating new policy with number: POL-Policy-DEF-TESTI9MO
2025-12-04T16:26:52.181Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:52.182Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.184Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:52.184Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.186Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.PolicyService           : Created policy with id: 37
2025-12-04T16:26:52.193Z ERROR 8752 --- [http-nio-8080-exec-1] c.acms.exception.GlobalExceptionHandler  : Validation error: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] 
2025-12-04T16:26:52.193Z  WARN 8752 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.acms.dto.ApiResponse<com.acms.dto.PolicyDTO>> com.acms.controller.PolicyController.updatePolicy(java.lang.Long,com.acms.dto.PolicyDTO) with 2 errors: [Field error in object 'policyDTO' on field 'agentId': rejected value [null]; codes [NotNull.policyDTO.agentId,NotNull.agentId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.agentId,agentId]; arguments []; default message [agentId]]; default message [Agent ID is required]] [Field error in object 'policyDTO' on field 'policyType': rejected value [null]; codes [NotBlank.policyDTO.policyType,NotBlank.policyType,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [policyDTO.policyType,policyType]; arguments []; default message [policyType]]; default message [Policy type is required]] ]
2025-12-04T16:26:52.200Z  INFO 8752 --- [http-nio-8080-exec-8] com.acms.service.PolicyService           : Fetching policy with id: 12345
2025-12-04T16:26:52.200Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.201Z ERROR 8752 --- [http-nio-8080-exec-8] c.acms.exception.GlobalExceptionHandler  : Resource not found: Policy not found with id: 12345
2025-12-04T16:26:52.202Z  WARN 8752 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.acms.exception.ResourceNotFoundException: Policy not found with id: 12345]
2025-12-04T16:26:52.208Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TESTTXFC
2025-12-04T16:26:52.209Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:52.210Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.212Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:52.214Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.214Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.PolicyService           : Created policy with id: 38
2025-12-04T16:26:52.221Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.CommissionService       : Calculating commission for policy: 38, agent: 22, type: PERCENTAGE
2025-12-04T16:26:52.223Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.226Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.229Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:26:52.232Z DEBUG 8752 --- [http-nio-8080-exec-5] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:26:52.232Z DEBUG 8752 --- [http-nio-8080-exec-5] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:26:52.232Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:52.234Z DEBUG 8752 --- [http-nio-8080-exec-5] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:26:52.235Z  INFO 8752 --- [http-nio-8080-exec-5] com.acms.service.CommissionService       : Created commission with id: 14 for policy: 38, agent: 22
2025-12-04T16:26:52.242Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.PolicyService           : Creating new policy with number: POL-COMM-TESTR2NJ
2025-12-04T16:26:52.243Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:52.244Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.246Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:52.250Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.253Z  INFO 8752 --- [http-nio-8080-exec-4] com.acms.service.PolicyService           : Created policy with id: 39
2025-12-04T16:26:52.261Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.CommissionService       : Calculating commission for policy: 39, agent: 22, type: PERCENTAGE
2025-12-04T16:26:52.262Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.263Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.264Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 
    where
        c1_0.policy_id=? 
        and c1_0.agent_id=?
2025-12-04T16:26:52.265Z DEBUG 8752 --- [http-nio-8080-exec-6] com.acms.service.CommissionCalculator    : Calculating commission for premium: 1000.00, type: PERCENTAGE, custom rate: 0.15
2025-12-04T16:26:52.265Z DEBUG 8752 --- [http-nio-8080-exec-6] com.acms.service.CommissionCalculator    : Calculated commission: 150.00, effective rate: 0.15
2025-12-04T16:26:52.267Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    insert 
    into
        commissions
        (is_active,agent_id,calculation_date,commission_amount,commission_rate,commission_type,created_at,created_by,effective_date,expiry_date,notes,payment_date,payment_reference,policy_id,premium_amount,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:52.267Z DEBUG 8752 --- [http-nio-8080-exec-6] org.hibernate.SQL                        : 
    select
        c1_0.created_at,
        c1_0.updated_at 
    from
        commissions c1_0 
    where
        c1_0.id=?
2025-12-04T16:26:52.267Z  INFO 8752 --- [http-nio-8080-exec-6] com.acms.service.CommissionService       : Created commission with id: 15 for policy: 39, agent: 22
2025-12-04T16:26:52.276Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 offset ? rows fetch first ? rows only
2025-12-04T16:26:52.278Z DEBUG 8752 --- [http-nio-8080-exec-8] org.hibernate.SQL                        : 
    select
        count(a1_0.id) 
    from
        agents a1_0
2025-12-04T16:26:52.288Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.PolicyService           : Creating new policy with number: POL-LINK-Policy-ABC-TEST9M6B
2025-12-04T16:26:52.291Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:52.293Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.295Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:52.296Z DEBUG 8752 --- [http-nio-8080-exec-3] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.297Z  INFO 8752 --- [http-nio-8080-exec-3] com.acms.service.PolicyService           : Created policy with id: 40
2025-12-04T16:26:52.304Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.PolicyService           : Creating new policy with number: POL-LINK-Policy-DEF-TESTTHBS
2025-12-04T16:26:52.305Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.id 
    from
        policies p1_0 
    where
        p1_0.policy_number=? fetch first ? rows only
2025-12-04T16:26:52.306Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.308Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    insert 
    into
        policies
        (is_active,agent_id,cancellation_date,cancellation_reason,coverage_amount,created_at,created_by,deductible_amount,description,effective_date,expiration_date,group_name,group_number,policy_number,policy_type,premium,renewal_date,status,updated_at,updated_by,version,id) 
    values
        (?,?,?,?,?,localtimestamp,?,?,?,?,?,?,?,?,?,?,?,?,localtimestamp,?,?,default)
2025-12-04T16:26:52.309Z DEBUG 8752 --- [http-nio-8080-exec-9] org.hibernate.SQL                        : 
    select
        p1_0.created_at,
        p1_0.updated_at 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.311Z  INFO 8752 --- [http-nio-8080-exec-9] com.acms.service.PolicyService           : Created policy with id: 41
2025-12-04T16:26:52.324Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.is_active,
        c1_0.agent_id,
        c1_0.calculation_date,
        c1_0.commission_amount,
        c1_0.commission_rate,
        c1_0.commission_type,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.effective_date,
        c1_0.expiry_date,
        c1_0.notes,
        c1_0.payment_date,
        c1_0.payment_reference,
        c1_0.policy_id,
        c1_0.premium_amount,
        c1_0.status,
        c1_0.updated_at,
        c1_0.updated_by,
        c1_0.version 
    from
        commissions c1_0 offset ? rows fetch first ? rows only
2025-12-04T16:26:52.327Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.327Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.328Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.329Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.330Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.331Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.332Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.333Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.334Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.335Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.336Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.336Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.337Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.337Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.339Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.343Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.350Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.351Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.354Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.356Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
2025-12-04T16:26:52.357Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        a1_0.id,
        a1_0.is_active,
        a1_0.address,
        a1_0.agent_code,
        a1_0.city,
        a1_0.country,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.date_of_birth,
        a1_0.email,
        a1_0.first_name,
        a1_0.hire_date,
        a1_0.last_name,
        a1_0.middle_name,
        a1_0.notes,
        a1_0.phone,
        a1_0.postal_code,
        a1_0.state,
        a1_0.status,
        a1_0.termination_date,
        a1_0.updated_at,
        a1_0.updated_by,
        a1_0.version 
    from
        agents a1_0 
    where
        a1_0.id=?
2025-12-04T16:26:52.358Z DEBUG 8752 --- [http-nio-8080-exec-4] org.hibernate.SQL                        : 
    select
        p1_0.id,
        p1_0.is_active,
        p1_0.agent_id,
        p1_0.cancellation_date,
        p1_0.cancellation_reason,
        p1_0.coverage_amount,
        p1_0.created_at,
        p1_0.created_by,
        p1_0.deductible_amount,
        p1_0.description,
        p1_0.effective_date,
        p1_0.expiration_date,
        p1_0.group_name,
        p1_0.group_number,
        p1_0.policy_number,
        p1_0.policy_type,
        p1_0.premium,
        p1_0.renewal_date,
        p1_0.status,
        p1_0.updated_at,
        p1_0.updated_by,
        p1_0.version 
    from
        policies p1_0 
    where
        p1_0.id=?
